var Xs=Object.create;var nr=Object.defineProperty;var Ys=Object.getOwnPropertyDescriptor;var Hs=Object.getOwnPropertyNames;var $s=Object.getPrototypeOf,Ks=Object.prototype.hasOwnProperty;var Qs=(e,t,r)=>t in e?nr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var xe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Js=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Hs(t))!Ks.call(e,a)&&a!==r&&nr(e,a,{get:()=>t[a],enumerable:!(o=Ys(t,a))||o.enumerable});return e};var ar=(e,t,r)=>(r=e!=null?Xs($s(e)):{},Js(t||!e||!e.__esModule?nr(r,"default",{value:e,enumerable:!0}):r,e));var gt=(e,t,r)=>(Qs(e,typeof t!="symbol"?t+"":t,r),r);var Gr=xe((Dt,Br)=>{(function(e,t){typeof Dt=="object"&&typeof Br<"u"?t(Dt):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.fastUniqueNumbers={}))})(Dt,function(e){"use strict";var t=function(m){return function(f){var d=m(f);return f.add(d),d}},r=function(m){return function(f,d){return m.set(f,d),d}},o=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,a=536870912,c=a*2,u=function(m,f){return function(d){var h=f.get(d),x=h===void 0?d.size:h<c?h+1:0;if(!d.has(x))return m(d,x);if(d.size<a){for(;d.has(x);)x=Math.floor(Math.random()*c);return m(d,x)}if(d.size>o)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;d.has(x);)x=Math.floor(Math.random()*o);return m(d,x)}},i=new WeakMap,s=r(i),n=u(s,i),l=t(n);e.addUniqueNumber=l,e.generateUniqueNumber=n})});var jr=xe((uu,yt)=>{function ei(e){if(Array.isArray(e))return e}yt.exports=ei,yt.exports.__esModule=!0,yt.exports.default=yt.exports});var Ur=xe((lu,Ct)=>{function ti(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var o,a,c,u,i=[],s=!0,n=!1;try{if(c=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=c.call(r)).done)&&(i.push(o.value),i.length!==t);s=!0);}catch(l){n=!0,a=l}finally{try{if(!s&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(n)throw a}}return i}}Ct.exports=ti,Ct.exports.__esModule=!0,Ct.exports.default=Ct.exports});var qr=xe((pu,wt)=>{function ri(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}wt.exports=ri,wt.exports.__esModule=!0,wt.exports.default=wt.exports});var zr=xe((du,At)=>{var Zr=qr();function oi(e,t){if(e){if(typeof e=="string")return Zr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zr(e,t)}}At.exports=oi,At.exports.__esModule=!0,At.exports.default=At.exports});var Xr=xe((fu,_t)=>{function ni(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}_t.exports=ni,_t.exports.__esModule=!0,_t.exports.default=_t.exports});var Yr=xe((mu,St)=>{var ai=jr(),si=Ur(),ii=zr(),ci=Xr();function ui(e,t){return ai(e)||si(e,t)||ii(e,t)||ci()}St.exports=ui,St.exports.__esModule=!0,St.exports.default=St.exports});var Hr=xe((hu,Ot)=>{function li(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Ot.exports=li,Ot.exports.__esModule=!0,Ot.exports.default=Ot.exports});var cr=xe((xu,Fe)=>{function ir(e){"@babel/helpers - typeof";return Fe.exports=ir=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fe.exports.__esModule=!0,Fe.exports.default=Fe.exports,ir(e)}Fe.exports=ir,Fe.exports.__esModule=!0,Fe.exports.default=Fe.exports});var Kr=xe((Nu,It)=>{var $r=cr().default;function pi(e,t){if($r(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if($r(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}It.exports=pi,It.exports.__esModule=!0,It.exports.default=It.exports});var Qr=xe((vu,Tt)=>{var di=cr().default,fi=Kr();function mi(e){var t=fi(e,"string");return di(t)=="symbol"?t:String(t)}Tt.exports=mi,Tt.exports.__esModule=!0,Tt.exports.default=Tt.exports});var eo=xe((gu,bt)=>{var hi=Qr();function Jr(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,hi(o.key),o)}}function xi(e,t,r){return t&&Jr(e.prototype,t),r&&Jr(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}bt.exports=xi,bt.exports.__esModule=!0,bt.exports.default=bt.exports});var ur=xe((Lt,to)=>{(function(e,t){typeof Lt=="object"&&typeof to<"u"?t(Lt,Yr(),Hr(),eo()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/slicedToArray","@babel/runtime/helpers/classCallCheck","@babel/runtime/helpers/createClass"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.automationEvents={},e._slicedToArray,e._classCallCheck,e._createClass))})(Lt,function(e,t,r,o){"use strict";var a=function(S,I,w){return{endTime:I,insertTime:w,type:"exponentialRampToValue",value:S}},c=function(S,I,w){return{endTime:I,insertTime:w,type:"linearRampToValue",value:S}},u=function(S,I){return{startTime:I,type:"setValue",value:S}},i=function(S,I,w){return{duration:w,startTime:I,type:"setValueCurve",values:S}},s=function(S,I,w){var F=w.startTime,T=w.target,D=w.timeConstant;return T+(I-T)*Math.exp((F-S)/D)},n=function(S){return S.type==="exponentialRampToValue"},l=function(S){return S.type==="linearRampToValue"},p=function(S){return n(S)||l(S)},m=function(S){return S.type==="setValue"},f=function(S){return S.type==="setValueCurve"},d=function R(S,I,w,F){var T=S[I];return T===void 0?F:p(T)||m(T)?T.value:f(T)?T.values[T.values.length-1]:s(w,R(S,I-1,T.startTime,F),T)},h=function(S,I,w,F,T){return w===void 0?[F.insertTime,T]:p(w)?[w.endTime,w.value]:m(w)?[w.startTime,w.value]:f(w)?[w.startTime+w.duration,w.values[w.values.length-1]]:[w.startTime,d(S,I-1,w.startTime,T)]},x=function(S){return S.type==="cancelAndHold"},N=function(S){return S.type==="cancelScheduledValues"},A=function(S){return x(S)||N(S)?S.cancelTime:n(S)||l(S)?S.endTime:S.startTime},_=function(S,I,w,F){var T=F.endTime,D=F.value;return w===D?D:0<w&&0<D||w<0&&D<0?w*Math.pow(D/w,(S-I)/(T-I)):0},b=function(S,I,w,F){var T=F.endTime,D=F.value;return w+(S-I)/(T-I)*(D-w)},v=function(S,I){var w=Math.floor(I),F=Math.ceil(I);return w===F?S[w]:(1-(I-w))*S[w]+(1-(F-I))*S[F]},y=function(S,I){var w=I.duration,F=I.startTime,T=I.values,D=(S-F)/w*(T.length-1);return v(T,D)},C=function(S){return S.type==="setTarget"},g=function(R){function S(I){r(this,S),this._automationEvents=[],this._currenTime=0,this._defaultValue=I}return o(S,[{key:R,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(w){var F=A(w);if(x(w)||N(w)){var T=this._automationEvents.findIndex(function(B){return N(w)&&f(B)?B.startTime+B.duration>=F:A(B)>=F}),D=this._automationEvents[T];if(T!==-1&&(this._automationEvents=this._automationEvents.slice(0,T)),x(w)){var P=this._automationEvents[this._automationEvents.length-1];if(D!==void 0&&p(D)){if(P!==void 0&&C(P))throw new Error("The internal list is malformed.");var U=P===void 0?D.insertTime:f(P)?P.startTime+P.duration:A(P),se=P===void 0?this._defaultValue:f(P)?P.values[P.values.length-1]:P.value,ue=n(D)?_(F,U,se,D):b(F,U,se,D),G=n(D)?a(ue,F,this._currenTime):c(ue,F,this._currenTime);this._automationEvents.push(G)}if(P!==void 0&&C(P)&&this._automationEvents.push(u(this.getValue(F),F)),P!==void 0&&f(P)&&P.startTime+P.duration>F){var Y=F-P.startTime,re=(P.values.length-1)/P.duration,V=Math.max(2,1+Math.ceil(Y*re)),Ne=Y/(V-1)*re,ve=P.values.slice(0,V);if(Ne<1)for(var he=1;he<V;he+=1){var ke=Ne*he%1;ve[he]=P.values[he-1]*(1-ke)+P.values[he]*ke}this._automationEvents[this._automationEvents.length-1]=i(ve,P.startTime,Y)}}}else{var Ze=this._automationEvents.findIndex(function(B){return A(B)>F}),Ke=Ze===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[Ze-1];if(Ke!==void 0&&f(Ke)&&A(Ke)+Ke.duration>F)return!1;var L=n(w)?a(w.value,w.endTime,this._currenTime):l(w)?c(w.value,F,this._currenTime):w;if(Ze===-1)this._automationEvents.push(L);else{if(f(w)&&F+w.duration>A(this._automationEvents[Ze]))return!1;this._automationEvents.splice(Ze,0,L)}}return!0}},{key:"flush",value:function(w){var F=this._automationEvents.findIndex(function(P){return A(P)>w});if(F>1){var T=this._automationEvents.slice(F-1),D=T[0];C(D)&&T.unshift(u(d(this._automationEvents,F-2,D.startTime,this._defaultValue),D.startTime)),this._automationEvents=T}}},{key:"getValue",value:function(w){if(this._automationEvents.length===0)return this._defaultValue;var F=this._automationEvents.findIndex(function(ve){return A(ve)>w}),T=this._automationEvents[F],D=(F===-1?this._automationEvents.length:F)-1,P=this._automationEvents[D];if(P!==void 0&&C(P)&&(T===void 0||!p(T)||T.insertTime>w))return s(w,d(this._automationEvents,D-1,P.startTime,this._defaultValue),P);if(P!==void 0&&m(P)&&(T===void 0||!p(T)))return P.value;if(P!==void 0&&f(P)&&(T===void 0||!p(T)||P.startTime+P.duration>w))return w<P.startTime+P.duration?y(w,P):P.values[P.values.length-1];if(P!==void 0&&p(P)&&(T===void 0||!p(T)))return P.value;if(T!==void 0&&n(T)){var U=h(this._automationEvents,D,P,T,this._defaultValue),se=t(U,2),ue=se[0],G=se[1];return _(w,ue,G,T)}if(T!==void 0&&l(T)){var Y=h(this._automationEvents,D,P,T,this._defaultValue),re=t(Y,2),V=re[0],Ne=re[1];return b(w,V,Ne,T)}return this._defaultValue}}]),S}(Symbol.iterator),k=function(S){return{cancelTime:S,type:"cancelAndHold"}},E=function(S){return{cancelTime:S,type:"cancelScheduledValues"}},M=function(S,I){return{endTime:I,type:"exponentialRampToValue",value:S}},O=function(S,I){return{endTime:I,type:"linearRampToValue",value:S}},W=function(S,I,w){return{startTime:I,target:S,timeConstant:w,type:"setTarget"}};e.AutomationEventList=g,e.createCancelAndHoldAutomationEvent=k,e.createCancelScheduledValuesAutomationEvent=E,e.createExponentialRampToValueAutomationEvent=M,e.createLinearRampToValueAutomationEvent=O,e.createSetTargetAutomationEvent=W,e.createSetValueAutomationEvent=u,e.createSetValueCurveAutomationEvent=i})});EventTarget.prototype._nativeEventListener=EventTarget.prototype._nativeEventListener||EventTarget.prototype.addEventListener;for(let e of[Window,Document,HTMLIFrameElement])e.prototype.addEventListener=new Proxy(e.prototype.addEventListener,{apply:(t,r,o)=>(o[1]&&o[1]instanceof Function&&(o[1]=new Proxy(o[1],{apply:(a,c,u)=>{try{if(document.querySelector("#modMenu")?.contains(u[0].target))return!1}catch{}return a.apply(c,u)}})),t.apply(r,o))});function Qe(e){return e.map((t,r)=>[r,t])}function sr(e){let t={},r="wss://73a59210-8993-4b29-8c5b-b0d9f2edf0f5-00-33hnin010jlp8.janeway.replit.dev",o=new WebSocket(r),a=document.getElementById("connect-button"),c=document.getElementById("available-players");window._mod_WS=o,o.onopen=()=>{console.log("Connected to server")},o.onmessage=s=>{if(s.data.startsWith("connect-req:")){let n=s.data.split(":")[1];confirm(`Player ${n} wants to connect to you. Accept?`)?(u(`connect-accept:${n}`),e.connecting=!0,window.opponent=n):u(`connect-reject:${n}`)}if(s.data.startsWith("connect-accepted")){let n=s.data.split(":")[1];window.opponent=n,window.basketLoading.then(()=>setInterval(()=>{e.multiplayer===!0&&u(`data-json:${JSON.stringify({type:"event",event:"update",target:e.opponent,players:window.players.map(l=>({x:l.x,y:l.y,instVars:l.instVars})),heads:window.heads.map(l=>({x:l.x,y:l.y,instVars:l.instVars})),ball:{x:window.ball.x,y:window.ball.y,instVars:{hold:window.ball.instVars.hold,who:window.ball.instVars.who}}})}`)},10))}if(s.data.startsWith("ids-available")){let n=s.data.split(":")[1].split(",").filter(l=>!!l);if(n.find(l=>l===e.multiplayerId)&&n.splice(n.indexOf(e.multiplayerId),1),n.length>=1){if(JSON.stringify(n)===JSON.stringify([...Array.from(document.querySelectorAll(".player + span")).map(l=>l.textContent)]))return;a.disabled=!1,c.innerHTML="";for(let l of n)if(l!==e.multiplayerId){let p=document.createElement("input");p.type="radio",p.name="player",p.className="player",p.value=l,c.appendChild(p),c.innerHTML+=`<span>${l}</span><br />`}}}if(s.data.startsWith("data-json:")){let n=JSON.parse(s.data.split("data-json:")[1]);i(n)}},o.onclose=()=>{console.log("Disconnected from server")};function u(s){o.send(s)}function i(s={}){if(s.target!==e.multiplayerId)return!1;if(s.type==="event"){if(s.event==="keydown"){for(let[p,m]of Qe(s.players)){let f=window.players.find((d,h)=>p===h);if(f){f.x=m.x,f.y=m.y;for(let[d,h]of Object.entries(m.instVars))f.instVars[d]=h}}for(let[p,m]of Qe(s.heads)){let f=window.heads.find((d,h)=>p===h);if(f){f.x=m.x,f.y=m.y;for(let[d,h]of Object.entries(m.instVars))f.instVars[d]=h}}let n=window.ball;n.x=s.ball.x,n.y=s.ball.y;for(let[p,m]of Object.entries(s.ball.instVars))n.instVars[p]=m;let l=new KeyboardEvent("keydown",{key:s.key,which:s.which,keyCode:s.keyCode,code:s.code});window.dispatchEvent(l)}else if(s.event==="keyup"){let n=new KeyboardEvent("keyup",{key:s.key,which:s.which,keyCode:s.keyCode,code:s.code});window.dispatchEvent(n)}else if(s.event==="update"){if(t.w||t.W||t.ArrowUp)return!1;for(let[l,p]of Qe(s.players)){let m=window.players.find((f,d)=>l===d);if(m){m.x=p.x,m.y=p.y;for(let[f,d]of Object.entries(p.instVars))m.instVars[f]=d}}for(let[l,p]of Qe(s.heads)){let m=window.heads.find((f,d)=>l===d);if(m){m.x=p.x,m.y=p.y;for(let[f,d]of Object.entries(p.instVars))m.instVars[f]=d}}let n=window.ball;n.x=s.ball.x,n.y=s.ball.y;for(let[l,p]of Object.entries(s.ball.instVars))n.instVars[l]=p}}}window._nativeEventListener("keydown",s=>{if(!s.isTrusted)return!1;e.multiplayer===!0&&(s.key==="w"?u(`data-json:${JSON.stringify({type:"event",event:"keydown",key:"w",which:87,keyCode:87,code:"KeyW",target:e.opponent,players:window.players.map(n=>({x:n.x,y:n.y,instVars:n.instVars})),heads:window.heads.map(n=>({x:n.x,y:n.y,instVars:n.instVars})),ball:{x:window.ball.x,y:window.ball.y,instVars:window.ball.instVars}})}`):s.key==="ArrowUp"&&u(`data-json:${JSON.stringify({type:"event",event:"keydown",key:"ArrowUp",which:38,keyCode:38,code:"ArrowUp",target:e.opponent,players:window.players.map(n=>({x:n.x,y:n.y,instVars:n.instVars})),heads:window.heads.map(n=>({x:n.x,y:n.y,instVars:n.instVars})),ball:{x:window.ball.x,y:window.ball.y,instVars:window.ball.instVars}})}`))}),window._nativeEventListener("keyup",s=>{if(!s.isTrusted)return!1;e.multiplayer===!0&&(s.key==="w"?u(`data-json:${JSON.stringify({type:"event",event:"keyup",key:"w",which:87,keyCode:87,code:"KeyW",target:e.opponent})}`):s.key==="ArrowUp"&&u(`data-json:${JSON.stringify({type:"event",event:"keyup",key:"ArrowUp",which:38,keyCode:38,code:"ArrowUp",target:e.opponent})}`))})}var Vr=ar(Gr());var me=ar(ur());var ro=()=>new DOMException("","AbortError");var oo=e=>(t,r,[o,a,c],u)=>{e(t[a],[r,o,c],i=>i[0]===r&&i[1]===o,u)};var no=e=>(t,r,o)=>{let a=[];for(let c=0;c<o.numberOfInputs;c+=1)a.push(new Set);e.set(t,{activeInputs:a,outputs:new Set,passiveInputs:new WeakMap,renderer:r})};var ao=e=>(t,r)=>{e.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:r})};var Te=new WeakSet,Wt=new WeakMap,Je=new WeakMap,Vt=new WeakMap,Mt=new WeakMap,et=new WeakMap,Bt=new WeakMap,Et=new WeakMap,Rt=new WeakMap,Pt=new WeakMap;var so={construct(){return so}},io=e=>{try{let t=new Proxy(e,so);new t}catch{return!1}return!0};var co=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,lr=(e,t)=>{let r=[],o=e.replace(/^[\s]+/,""),a=o.match(co);for(;a!==null;){let c=a[1].slice(1,-1),u=a[0].replace(/([\s]+)?;?$/,"").replace(c,new URL(c,t).toString());r.push(u),o=o.slice(a[0].length).replace(/^[\s]+/,""),a=o.match(co)}return[r.join(";"),o]};var uo=e=>{if(e!==void 0&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},lo=e=>{if(!io(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(e.prototype===null||typeof e.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},po=(e,t,r,o,a,c,u,i,s,n,l,p,m)=>{let f=0;return(d,h,x={credentials:"omit"})=>{let N=l.get(d);if(N!==void 0&&N.has(h))return Promise.resolve();let A=n.get(d);if(A!==void 0){let v=A.get(h);if(v!==void 0)return v}let _=c(d),b=_.audioWorklet===void 0?a(h).then(([v,y])=>{let[C,g]=lr(v,y),k=`${C};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${g}
})})(window,'_AWGS')`;return r(k)}).then(()=>{let v=m._AWGS.pop();if(v===void 0)throw new SyntaxError;o(_.currentTime,_.sampleRate,()=>v(class{},void 0,(y,C)=>{if(y.trim()==="")throw t();let g=Rt.get(_);if(g!==void 0){if(g.has(y))throw t();lo(C),uo(C.parameterDescriptors),g.set(y,C)}else lo(C),uo(C.parameterDescriptors),Rt.set(_,new Map([[y,C]]))},_.sampleRate,void 0,void 0))}):Promise.all([a(h),Promise.resolve(e(p,p))]).then(([[v,y],C])=>{let g=f+1;f=g;let[k,E]=lr(v,y),R=`${k};((AudioWorkletProcessor,registerProcessor)=>{${E}
})(${C?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${C?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${C?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${g}',class extends AudioWorkletProcessor{process(){return !1}})`,S=new Blob([R],{type:"application/javascript; charset=utf-8"}),I=URL.createObjectURL(S);return _.audioWorklet.addModule(I,x).then(()=>{if(i(_))return _;let w=u(_);return w.audioWorklet.addModule(I,x).then(()=>w)}).then(w=>{if(s===null)throw new SyntaxError;try{new s(w,`__sac${g}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(I))});return A===void 0?n.set(d,new Map([[h,b]])):A.set(h,b),b.then(()=>{let v=l.get(d);v===void 0?l.set(d,new Set([h])):v.add(h)}).finally(()=>{let v=n.get(d);v!==void 0&&v.delete(h)}),b}};var ae=(e,t)=>{let r=e.get(t);if(r===void 0)throw new Error("A value with the given key could not be found.");return r};var Ve=(e,t)=>{let r=Array.from(e).filter(t);if(r.length>1)throw Error("More than one element was found.");if(r.length===0)throw Error("No element was found.");let[o]=r;return e.delete(o),o};var Gt=(e,t,r,o)=>{let a=ae(e,t),c=Ve(a,u=>u[0]===r&&u[1]===o);return a.size===0&&e.delete(t),c};var be=e=>ae(Bt,e);var _e=e=>{if(Te.has(e))throw new Error("The AudioNode is already stored.");Te.add(e),be(e).forEach(t=>t(!0))};var jt=e=>"port"in e;var Me=e=>{if(!Te.has(e))throw new Error("The AudioNode is not stored.");Te.delete(e),be(e).forEach(t=>t(!1))};var kt=(e,t)=>{!jt(e)&&t.every(r=>r.size===0)&&Me(e)};var fo=(e,t,r,o,a,c,u,i,s,n,l,p,m)=>{let f=new WeakMap;return(d,h,x,N,A)=>{let{activeInputs:_,passiveInputs:b}=c(h),{outputs:v}=c(d),y=i(d),C=g=>{let k=s(h),E=s(d);if(g){let M=Gt(b,d,x,N);e(_,d,M,!1),!A&&!p(d)&&r(E,k,x,N),m(h)&&_e(h)}else{let M=o(_,d,x,N);t(b,N,M,!1),!A&&!p(d)&&a(E,k,x,N);let O=u(h);if(O===0)l(h)&&kt(h,_);else{let W=f.get(h);W!==void 0&&clearTimeout(W),f.set(h,setTimeout(()=>{l(h)&&kt(h,_)},O*1e3))}}};return n(v,[h,x,N],g=>g[0]===h&&g[1]===x&&g[2]===N,!0)?(y.add(C),l(d)?e(_,d,[x,N,C],!0):t(b,N,[d,x,C],!0),!0):!1}};var mo=e=>(t,r,[o,a,c],u)=>{let i=t.get(o);i===void 0?t.set(o,new Set([[a,r,c]])):e(i,[a,r,c],s=>s[0]===a&&s[1]===r,u)};var ho=e=>(t,r)=>{let o=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.connect(o).connect(t.destination);let a=()=>{r.removeEventListener("ended",a),r.disconnect(o),o.disconnect()};r.addEventListener("ended",a)};var xo=e=>(t,r)=>{e(t).add(r)};var Ni={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},No=(e,t,r,o,a,c)=>class extends e{constructor(i,s){let n=a(i),l={...Ni,...s},p=o(n,l),m=c(n)?t():null;super(i,!1,p,m),this._nativeAnalyserNode=p}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(i){this._nativeAnalyserNode.fftSize=i}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(i){let s=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=i,!(i>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=s,r()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(i){let s=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=i,!(this._nativeAnalyserNode.maxDecibels>i))throw this._nativeAnalyserNode.minDecibels=s,r()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(i){this._nativeAnalyserNode.smoothingTimeConstant=i}getByteFrequencyData(i){this._nativeAnalyserNode.getByteFrequencyData(i)}getByteTimeDomainData(i){this._nativeAnalyserNode.getByteTimeDomainData(i)}getFloatFrequencyData(i){this._nativeAnalyserNode.getFloatFrequencyData(i)}getFloatTimeDomainData(i){this._nativeAnalyserNode.getFloatTimeDomainData(i)}};var q=(e,t)=>e.context===t;var vo=(e,t,r)=>()=>{let o=new WeakMap,a=async(c,u)=>{let i=t(c);if(!q(i,u)){let n={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,fftSize:i.fftSize,maxDecibels:i.maxDecibels,minDecibels:i.minDecibels,smoothingTimeConstant:i.smoothingTimeConstant};i=e(u,n)}return o.set(u,i),await r(c,u,i),i};return{render(c,u){let i=o.get(u);return i!==void 0?Promise.resolve(i):a(c,u)}}};var tt=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0};var ye=()=>new DOMException("","IndexSizeError");var rt=e=>{e.getChannelData=(t=>r=>{try{return t.call(e,r)}catch(o){throw o.code===12?ye():o}})(e.getChannelData)};var vi={numberOfChannels:1},go=(e,t,r,o,a,c,u,i)=>{let s=null;return class yo{constructor(l){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");let{length:p,numberOfChannels:m,sampleRate:f}={...vi,...l};s===null&&(s=new a(1,1,44100));let d=o!==null&&t(c,c)?new o({length:p,numberOfChannels:m,sampleRate:f}):s.createBuffer(m,p,f);if(d.numberOfChannels===0)throw r();return typeof d.copyFromChannel!="function"?(u(d),rt(d)):t(tt,()=>tt(d))||i(d),e.add(d),d}static[Symbol.hasInstance](l){return l!==null&&typeof l=="object"&&Object.getPrototypeOf(l)===yo.prototype||e.has(l)}}};var oe=-34028234663852886e22,te=-oe;var de=e=>Te.has(e);var gi={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Co=(e,t,r,o,a,c,u,i)=>class extends e{constructor(n,l){let p=c(n),m={...gi,...l},f=a(p,m),d=u(p),h=d?t():null;super(n,!1,f,h),this._audioBufferSourceNodeRenderer=h,this._isBufferNullified=!1,this._isBufferSet=m.buffer!==null,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=r(this,d,f.playbackRate,te,oe)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(n){if(this._nativeAudioBufferSourceNode.buffer=n,n!==null){if(this._isBufferSet)throw o();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(n){this._nativeAudioBufferSourceNode.loop=n}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(n){this._nativeAudioBufferSourceNode.loopEnd=n}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(n){this._nativeAudioBufferSourceNode.loopStart=n}get onended(){return this._onended}set onended(n){let l=typeof n=="function"?i(this,n):null;this._nativeAudioBufferSourceNode.onended=l;let p=this._nativeAudioBufferSourceNode.onended;this._onended=p!==null&&p===l?n:p}get playbackRate(){return this._playbackRate}start(n=0,l=0,p){if(this._nativeAudioBufferSourceNode.start(n,l,p),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=p===void 0?[n,l]:[n,l,p]),this.context.state!=="closed"){_e(this);let m=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",m),de(this)&&Me(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",m)}}stop(n=0){this._nativeAudioBufferSourceNode.stop(n),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=n)}};var wo=(e,t,r,o,a)=>()=>{let c=new WeakMap,u=null,i=null,s=async(n,l)=>{let p=r(n),m=q(p,l);if(!m){let f={buffer:p.buffer,channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,loop:p.loop,loopEnd:p.loopEnd,loopStart:p.loopStart,playbackRate:p.playbackRate.value};p=t(l,f),u!==null&&p.start(...u),i!==null&&p.stop(i)}return c.set(l,p),m?await e(l,n.playbackRate,p.playbackRate):await o(l,n.playbackRate,p.playbackRate),await a(n,l,p),p};return{set start(n){u=n},set stop(n){i=n},render(n,l){let p=c.get(l);return p!==void 0?Promise.resolve(p):s(n,l)}}};var Ao=e=>"playbackRate"in e;var _o=e=>"frequency"in e&&"gain"in e;var So=e=>"offset"in e;var Oo=e=>!("frequency"in e)&&"gain"in e;var Io=e=>"detune"in e&&"frequency"in e;var To=e=>"pan"in e;var ce=e=>ae(Wt,e);var Be=e=>ae(Vt,e);var Ut=(e,t)=>{let{activeInputs:r}=ce(e);r.forEach(a=>a.forEach(([c])=>{t.includes(e)||Ut(c,[...t,e])}));let o=Ao(e)?[e.playbackRate]:jt(e)?Array.from(e.parameters.values()):_o(e)?[e.Q,e.detune,e.frequency,e.gain]:So(e)?[e.offset]:Oo(e)?[e.gain]:Io(e)?[e.detune,e.frequency]:To(e)?[e.pan]:[];for(let a of o){let c=Be(a);c!==void 0&&c.activeInputs.forEach(([u])=>Ut(u,t))}de(e)&&Me(e)};var Ge=e=>{Ut(e.destination,[])};var qt=e=>e===void 0||typeof e=="number"||typeof e=="string"&&(e==="balanced"||e==="interactive"||e==="playback");var bo=(e,t,r,o,a,c,u,i,s)=>class extends e{constructor(l={}){if(s===null)throw new Error("Missing the native AudioContext constructor.");let p;try{p=new s(l)}catch(d){throw d.code===12&&d.message==="sampleRate is not in range"?r():d}if(p===null)throw o();if(!qt(l.latencyHint))throw new TypeError(`The provided value '${l.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(l.sampleRate!==void 0&&p.sampleRate!==l.sampleRate)throw r();super(p,2);let{latencyHint:m}=l,{sampleRate:f}=p;if(this._baseLatency=typeof p.baseLatency=="number"?p.baseLatency:m==="balanced"?512/f:m==="interactive"||m===void 0?256/f:m==="playback"?1024/f:Math.max(2,Math.min(128,Math.round(m*f/128)))*128/f,this._nativeAudioContext=p,s.name==="webkitAudioContext"?(this._nativeGainNode=p.createGain(),this._nativeOscillatorNode=p.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(p.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,p.state==="running"){this._state="suspended";let d=()=>{this._state==="suspended"&&(this._state=null),p.removeEventListener("statechange",d)};p.addEventListener("statechange",d)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Ge(this)}))}createMediaElementSource(l){return new a(this,{mediaElement:l})}createMediaStreamDestination(){return new c(this)}createMediaStreamSource(l){return new u(this,{mediaStream:l})}createMediaStreamTrackSource(l){return new i(this,{mediaStreamTrack:l})}resume(){return this._state==="suspended"?new Promise((l,p)=>{let m=()=>{this._nativeAudioContext.removeEventListener("statechange",m),this._nativeAudioContext.state==="running"?l():this.resume().then(l,p)};this._nativeAudioContext.addEventListener("statechange",m)}):this._nativeAudioContext.resume().catch(l=>{throw l===void 0||l.code===15?t():l})}suspend(){return this._nativeAudioContext.suspend().catch(l=>{throw l===void 0?t():l})}};var Mo=(e,t,r,o,a,c,u,i)=>class extends e{constructor(n,l){let p=c(n),m=u(p),f=a(p,l,m),d=m?t(i):null;super(n,!1,f,d),this._isNodeOfNativeOfflineAudioContext=m,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(n){if(this._isNodeOfNativeOfflineAudioContext)throw o();if(n>this._nativeAudioDestinationNode.maxChannelCount)throw r();this._nativeAudioDestinationNode.channelCount=n}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(n){if(this._isNodeOfNativeOfflineAudioContext)throw o();this._nativeAudioDestinationNode.channelCountMode=n}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}};var Eo=e=>{let t=new WeakMap,r=async(o,a)=>{let c=a.destination;return t.set(a,c),await e(o,a,c),c};return{render(o,a){let c=t.get(a);return c!==void 0?Promise.resolve(c):r(o,a)}}};var Ro=(e,t,r,o,a,c,u,i)=>(s,n)=>{let l=n.listener,p=()=>{let v=new Float32Array(1),y=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),C=u(n),g=!1,k=[0,0,-1,0,1,0],E=[0,0,0],M=()=>{if(g)return;g=!0;let S=o(n,256,9,0);S.onaudioprocess=({inputBuffer:I})=>{let w=[c(I,v,0),c(I,v,1),c(I,v,2),c(I,v,3),c(I,v,4),c(I,v,5)];w.some((T,D)=>T!==k[D])&&(l.setOrientation(...w),k=w);let F=[c(I,v,6),c(I,v,7),c(I,v,8)];F.some((T,D)=>T!==E[D])&&(l.setPosition(...F),E=F)},y.connect(S)},O=S=>I=>{I!==k[S]&&(k[S]=I,l.setOrientation(...k))},W=S=>I=>{I!==E[S]&&(E[S]=I,l.setPosition(...E))},R=(S,I,w)=>{let F=r(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:I});F.connect(y,0,S),F.start(),Object.defineProperty(F.offset,"defaultValue",{get(){return I}});let T=e({context:s},C,F.offset,te,oe);return i(T,"value",D=>()=>D.call(T),D=>P=>{try{D.call(T,P)}catch(U){if(U.code!==9)throw U}M(),C&&w(P)}),T.cancelAndHoldAtTime=(D=>C?()=>{throw a()}:(...P)=>{let U=D.apply(T,P);return M(),U})(T.cancelAndHoldAtTime),T.cancelScheduledValues=(D=>C?()=>{throw a()}:(...P)=>{let U=D.apply(T,P);return M(),U})(T.cancelScheduledValues),T.exponentialRampToValueAtTime=(D=>C?()=>{throw a()}:(...P)=>{let U=D.apply(T,P);return M(),U})(T.exponentialRampToValueAtTime),T.linearRampToValueAtTime=(D=>C?()=>{throw a()}:(...P)=>{let U=D.apply(T,P);return M(),U})(T.linearRampToValueAtTime),T.setTargetAtTime=(D=>C?()=>{throw a()}:(...P)=>{let U=D.apply(T,P);return M(),U})(T.setTargetAtTime),T.setValueAtTime=(D=>C?()=>{throw a()}:(...P)=>{let U=D.apply(T,P);return M(),U})(T.setValueAtTime),T.setValueCurveAtTime=(D=>C?()=>{throw a()}:(...P)=>{let U=D.apply(T,P);return M(),U})(T.setValueCurveAtTime),T};return{forwardX:R(0,0,O(0)),forwardY:R(1,0,O(1)),forwardZ:R(2,-1,O(2)),positionX:R(6,0,W(0)),positionY:R(7,0,W(1)),positionZ:R(8,0,W(2)),upX:R(3,0,O(3)),upY:R(4,1,O(4)),upZ:R(5,0,O(5))}},{forwardX:m,forwardY:f,forwardZ:d,positionX:h,positionY:x,positionZ:N,upX:A,upY:_,upZ:b}=l.forwardX===void 0?p():l;return{get forwardX(){return m},get forwardY(){return f},get forwardZ(){return d},get positionX(){return h},get positionY(){return x},get positionZ(){return N},get upX(){return A},get upY(){return _},get upZ(){return b}}};var ze=e=>"context"in e;var je=e=>ze(e[0]);var Se=(e,t,r,o)=>{for(let a of e)if(r(a)){if(o)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0};var pr=(e,t,[r,o],a)=>{Se(e,[t,r,o],c=>c[0]===t&&c[1]===r,a)};var dr=(e,[t,r,o],a)=>{let c=e.get(t);c===void 0?e.set(t,new Set([[r,o]])):Se(c,[r,o],u=>u[0]===r,a)};var Ce=e=>"inputs"in e;var ot=(e,t,r,o)=>{if(Ce(t)){let a=t.inputs[o];return e.connect(a,r,0),[a,r,0]}return e.connect(t,r,o),[t,r,o]};var fr=(e,t,r)=>{for(let o of e)if(o[0]===t&&o[1]===r)return e.delete(o),o;return null};var Po=(e,t,r)=>Ve(e,o=>o[0]===t&&o[1]===r);var mr=(e,t)=>{if(!be(e).delete(t))throw new Error("Missing the expected event listener.")};var hr=(e,t,r)=>{let o=ae(e,t),a=Ve(o,c=>c[0]===r);return o.size===0&&e.delete(t),a};var nt=(e,t,r,o)=>{Ce(t)?e.disconnect(t.inputs[o],r,0):e.disconnect(t,r,o)};var H=e=>ae(Je,e);var Xe=e=>ae(Mt,e);var De=e=>Et.has(e);var at=e=>!Te.has(e);var xr=(e,t)=>new Promise(r=>{if(t!==null)r(!0);else{let o=e.createScriptProcessor(256,1,1),a=e.createGain(),c=e.createBuffer(1,2,44100),u=c.getChannelData(0);u[0]=1,u[1]=1;let i=e.createBufferSource();i.buffer=c,i.loop=!0,i.connect(o).connect(e.destination),i.connect(a),i.disconnect(a),o.onaudioprocess=s=>{let n=s.inputBuffer.getChannelData(0);Array.prototype.some.call(n,l=>l===1)?r(!0):r(!1),i.stop(),o.onaudioprocess=null,i.disconnect(o),o.disconnect(e.destination)},i.start()}});var Zt=(e,t)=>{let r=new Map;for(let o of e)for(let a of o){let c=r.get(a);r.set(a,c===void 0?1:c+1)}r.forEach((o,a)=>t(a,o))};var Ye=e=>"context"in e;var ko=e=>{let t=new Map;e.connect=(r=>(o,a=0,c=0)=>{let u=Ye(o)?r(o,a,c):r(o,a),i=t.get(o);return i===void 0?t.set(o,[{input:c,output:a}]):i.every(s=>s.input!==c||s.output!==a)&&i.push({input:c,output:a}),u})(e.connect.bind(e)),e.disconnect=(r=>(o,a,c)=>{if(r.apply(e),o===void 0)t.clear();else if(typeof o=="number")for(let[u,i]of t){let s=i.filter(n=>n.output!==o);s.length===0?t.delete(u):t.set(u,s)}else if(t.has(o))if(a===void 0)t.delete(o);else{let u=t.get(o);if(u!==void 0){let i=u.filter(s=>s.output!==a&&(s.input!==c||c===void 0));i.length===0?t.delete(o):t.set(o,i)}}for(let[u,i]of t)i.forEach(s=>{Ye(u)?e.connect(u,s.output,s.input):e.connect(u,s.output)})})(e.disconnect)};var yi=(e,t,r,o)=>{let{activeInputs:a,passiveInputs:c}=Be(t),{outputs:u}=ce(e),i=be(e),s=n=>{let l=H(e),p=Xe(t);if(n){let m=hr(c,e,r);pr(a,e,m,!1),!o&&!De(e)&&l.connect(p,r)}else{let m=Po(a,e,r);dr(c,m,!1),!o&&!De(e)&&l.disconnect(p,r)}};return Se(u,[t,r],n=>n[0]===t&&n[1]===r,!0)?(i.add(s),de(e)?pr(a,e,[r,s],!0):dr(c,[e,r,s],!0),!0):!1},Ci=(e,t,r,o)=>{let{activeInputs:a,passiveInputs:c}=ce(t),u=fr(a[o],e,r);return u===null?[Gt(c,e,r,o)[2],!1]:[u[2],!0]},wi=(e,t,r)=>{let{activeInputs:o,passiveInputs:a}=Be(t),c=fr(o,e,r);return c===null?[hr(a,e,r)[1],!1]:[c[2],!0]},Nr=(e,t,r,o,a)=>{let[c,u]=Ci(e,r,o,a);if(c!==null&&(mr(e,c),u&&!t&&!De(e)&&nt(H(e),H(r),o,a)),de(r)){let{activeInputs:i}=ce(r);kt(r,i)}},vr=(e,t,r,o)=>{let[a,c]=wi(e,r,o);a!==null&&(mr(e,a),c&&!t&&!De(e)&&H(e).disconnect(Xe(r),o))},Ai=(e,t)=>{let r=ce(e),o=[];for(let a of r.outputs)je(a)?Nr(e,t,...a):vr(e,t,...a),o.push(a[0]);return r.outputs.clear(),o},_i=(e,t,r)=>{let o=ce(e),a=[];for(let c of o.outputs)c[1]===r&&(je(c)?Nr(e,t,...c):vr(e,t,...c),a.push(c[0]),o.outputs.delete(c));return a},Si=(e,t,r,o,a)=>{let c=ce(e);return Array.from(c.outputs).filter(u=>u[0]===r&&(o===void 0||u[1]===o)&&(a===void 0||u[2]===a)).map(u=>(je(u)?Nr(e,t,...u):vr(e,t,...u),c.outputs.delete(u),u[0]))},Fo=(e,t,r,o,a,c,u,i,s,n,l,p,m,f,d,h)=>class extends n{constructor(N,A,_,b){super(_),this._context=N,this._nativeAudioNode=_;let v=l(N);p(v)&&r(xr,()=>xr(v,h))!==!0&&ko(_),Je.set(this,_),Bt.set(this,new Set),N.state!=="closed"&&A&&_e(this),e(this,b,_)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(N){this._nativeAudioNode.channelCount=N}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(N){this._nativeAudioNode.channelCountMode=N}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(N){this._nativeAudioNode.channelInterpretation=N}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(N,A=0,_=0){if(A<0||A>=this._nativeAudioNode.numberOfOutputs)throw a();let b=l(this._context),v=d(b);if(m(N)||f(N))throw c();if(ze(N)){let g=H(N);try{let E=ot(this._nativeAudioNode,g,A,_),M=at(this);(v||M)&&this._nativeAudioNode.disconnect(...E),this.context.state!=="closed"&&!M&&at(N)&&_e(N)}catch(E){throw E.code===12?c():E}if(t(this,N,A,_,v)){let E=s([this],N);Zt(E,o(v))}return N}let y=Xe(N);if(y.name==="playbackRate"&&y.maxValue===1024)throw u();try{this._nativeAudioNode.connect(y,A),(v||at(this))&&this._nativeAudioNode.disconnect(y,A)}catch(g){throw g.code===12?c():g}if(yi(this,N,A,v)){let g=s([this],N);Zt(g,o(v))}}disconnect(N,A,_){let b,v=l(this._context),y=d(v);if(N===void 0)b=Ai(this,y);else if(typeof N=="number"){if(N<0||N>=this.numberOfOutputs)throw a();b=_i(this,y,N)}else{if(A!==void 0&&(A<0||A>=this.numberOfOutputs)||ze(N)&&_!==void 0&&(_<0||_>=N.numberOfInputs))throw a();if(b=Si(this,y,N,A,_),b.length===0)throw c()}for(let C of b){let g=s([this],C);Zt(g,i)}}};var Do=ar(ur()),Lo=(e,t,r,o,a,c,u,i,s,n,l,p,m)=>(f,d,h,x=null,N=null)=>{let A=h.value,_=new Do.AutomationEventList(A),b=d?o(_):null,v={get defaultValue(){return A},get maxValue(){return x===null?h.maxValue:x},get minValue(){return N===null?h.minValue:N},get value(){return h.value},set value(y){h.value=y,v.setValueAtTime(y,f.context.currentTime)},cancelAndHoldAtTime(y){if(typeof h.cancelAndHoldAtTime=="function")b===null&&_.flush(f.context.currentTime),_.add(a(y)),h.cancelAndHoldAtTime(y);else{let C=Array.from(_).pop();b===null&&_.flush(f.context.currentTime),_.add(a(y));let g=Array.from(_).pop();h.cancelScheduledValues(y),C!==g&&g!==void 0&&(g.type==="exponentialRampToValue"?h.exponentialRampToValueAtTime(g.value,g.endTime):g.type==="linearRampToValue"?h.linearRampToValueAtTime(g.value,g.endTime):g.type==="setValue"?h.setValueAtTime(g.value,g.startTime):g.type==="setValueCurve"&&h.setValueCurveAtTime(g.values,g.startTime,g.duration))}return v},cancelScheduledValues(y){return b===null&&_.flush(f.context.currentTime),_.add(c(y)),h.cancelScheduledValues(y),v},exponentialRampToValueAtTime(y,C){if(y===0)throw new RangeError;if(!Number.isFinite(C)||C<0)throw new RangeError;let g=f.context.currentTime;return b===null&&_.flush(g),Array.from(_).length===0&&(_.add(n(A,g)),h.setValueAtTime(A,g)),_.add(u(y,C)),h.exponentialRampToValueAtTime(y,C),v},linearRampToValueAtTime(y,C){let g=f.context.currentTime;return b===null&&_.flush(g),Array.from(_).length===0&&(_.add(n(A,g)),h.setValueAtTime(A,g)),_.add(i(y,C)),h.linearRampToValueAtTime(y,C),v},setTargetAtTime(y,C,g){return b===null&&_.flush(f.context.currentTime),_.add(s(y,C,g)),h.setTargetAtTime(y,C,g),v},setValueAtTime(y,C){return b===null&&_.flush(f.context.currentTime),_.add(n(y,C)),h.setValueAtTime(y,C),v},setValueCurveAtTime(y,C,g){let k=y instanceof Float32Array?y:new Float32Array(y);if(p!==null&&p.name==="webkitAudioContext"){let E=C+g,M=f.context.sampleRate,O=Math.ceil(C*M),W=Math.floor(E*M),R=W-O,S=new Float32Array(R);for(let w=0;w<R;w+=1){let F=(k.length-1)/g*((O+w)/M-C),T=Math.floor(F),D=Math.ceil(F);S[w]=T===D?k[T]:(1-(F-T))*k[T]+(1-(D-F))*k[D]}b===null&&_.flush(f.context.currentTime),_.add(l(S,C,g)),h.setValueCurveAtTime(S,C,g);let I=W/M;I<E&&m(v,S[S.length-1],I),m(v,k[k.length-1],E)}else b===null&&_.flush(f.context.currentTime),_.add(l(k,C,g)),h.setValueCurveAtTime(k,C,g);return v}};return r.set(v,h),t.set(v,f),e(v,b),v};var Wo=e=>({replay(t){for(let r of e)if(r.type==="exponentialRampToValue"){let{endTime:o,value:a}=r;t.exponentialRampToValueAtTime(a,o)}else if(r.type==="linearRampToValue"){let{endTime:o,value:a}=r;t.linearRampToValueAtTime(a,o)}else if(r.type==="setTarget"){let{startTime:o,target:a,timeConstant:c}=r;t.setTargetAtTime(a,o,c)}else if(r.type==="setValue"){let{startTime:o,value:a}=r;t.setValueAtTime(a,o)}else if(r.type==="setValueCurve"){let{duration:o,startTime:a,values:c}=r;t.setValueCurveAtTime(c,a,o)}else throw new Error("Can't apply an unknown automation.")}});var st=class{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,r=null){return this._map.forEach((o,a)=>t.call(r,o,a,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}};var Oi={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},Vo=(e,t,r,o,a,c,u,i,s,n,l,p,m,f)=>class extends t{constructor(h,x,N){var A;let _=i(h),b=s(_),v=l({...Oi,...N});m(v);let y=Rt.get(_),C=y?.get(x),g=b||_.state!=="closed"?_:(A=u(_))!==null&&A!==void 0?A:_,k=a(g,b?null:h.baseLatency,n,x,C,v),E=b?o(x,v,C):null;super(h,!0,k,E);let M=[];k.parameters.forEach((W,R)=>{let S=r(this,b,W);M.push([R,S])}),this._nativeAudioWorkletNode=k,this._onprocessorerror=null,this._parameters=new st(M),b&&e(_,this);let{activeInputs:O}=c(this);p(k,O)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(h){let x=typeof h=="function"?f(this,h):null;this._nativeAudioWorkletNode.onprocessorerror=x;let N=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=N!==null&&N===x?h:N}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function it(e,t,r,o,a){if(typeof e.copyFromChannel=="function")t[r].byteLength===0&&(t[r]=new Float32Array(128)),e.copyFromChannel(t[r],o,a);else{let c=e.getChannelData(o);if(t[r].byteLength===0)t[r]=c.slice(a,a+128);else{let u=new Float32Array(c.buffer,a*Float32Array.BYTES_PER_ELEMENT,128);t[r].set(u)}}}var zt=(e,t,r,o,a)=>{typeof e.copyToChannel=="function"?t[r].byteLength!==0&&e.copyToChannel(t[r],o,a):t[r].byteLength!==0&&e.getChannelData(o).set(t[r],a)};var ct=(e,t)=>{let r=[];for(let o=0;o<e;o+=1){let a=[],c=typeof t=="number"?t:t[o];for(let u=0;u<c;u+=1)a.push(new Float32Array(128));r.push(a)}return r};var Bo=(e,t)=>{let r=ae(Pt,e),o=H(t);return ae(r,o)};var Ii=async(e,t,r,o,a,c,u)=>{let i=t===null?Math.ceil(e.context.length/128)*128:t.length,s=o.channelCount*o.numberOfInputs,n=a.reduce((x,N)=>x+N,0),l=n===0?null:r.createBuffer(n,i,r.sampleRate);if(c===void 0)throw new Error("Missing the processor constructor.");let p=ce(e),m=await Bo(r,e),f=ct(o.numberOfInputs,o.channelCount),d=ct(o.numberOfOutputs,a),h=Array.from(e.parameters.keys()).reduce((x,N)=>({...x,[N]:new Float32Array(128)}),{});for(let x=0;x<i;x+=128){if(o.numberOfInputs>0&&t!==null)for(let N=0;N<o.numberOfInputs;N+=1)for(let A=0;A<o.channelCount;A+=1)it(t,f[N],A,A,x);c.parameterDescriptors!==void 0&&t!==null&&c.parameterDescriptors.forEach(({name:N},A)=>{it(t,h,N,s+A,x)});for(let N=0;N<o.numberOfInputs;N+=1)for(let A=0;A<a[N];A+=1)d[N][A].byteLength===0&&(d[N][A]=new Float32Array(128));try{let N=f.map((_,b)=>p.activeInputs[b].size===0?[]:_),A=u(x/r.sampleRate,r.sampleRate,()=>m.process(N,d,h));if(l!==null)for(let _=0,b=0;_<o.numberOfOutputs;_+=1){for(let v=0;v<a[_];v+=1)zt(l,d[_],v,b+v,x);b+=a[_]}if(!A)break}catch(N){e.dispatchEvent(new ErrorEvent("processorerror",{colno:N.colno,filename:N.filename,lineno:N.lineno,message:N.message}));break}}return l},Go=(e,t,r,o,a,c,u,i,s,n,l,p,m,f,d,h)=>(x,N,A)=>{let _=new WeakMap,b=null,v=async(y,C)=>{let g=l(y),k=null,E=q(g,C),M=Array.isArray(N.outputChannelCount)?N.outputChannelCount:Array.from(N.outputChannelCount);if(p===null){let O=M.reduce((I,w)=>I+w,0),W=a(C,{channelCount:Math.max(1,O),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,O)}),R=[];for(let I=0;I<y.numberOfOutputs;I+=1)R.push(o(C,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:M[I]}));let S=u(C,{channelCount:N.channelCount,channelCountMode:N.channelCountMode,channelInterpretation:N.channelInterpretation,gain:1});S.connect=t.bind(null,R),S.disconnect=s.bind(null,R),k=[W,R,S]}else E||(g=new p(C,x));if(_.set(C,k===null?g:k[2]),k!==null){if(b===null){if(A===void 0)throw new Error("Missing the processor constructor.");if(m===null)throw new Error("Missing the native OfflineAudioContext constructor.");let w=y.channelCount*y.numberOfInputs,F=A.parameterDescriptors===void 0?0:A.parameterDescriptors.length,T=w+F;b=Ii(y,T===0?null:await(async()=>{let P=new m(T,Math.ceil(y.context.length/128)*128,C.sampleRate),U=[],se=[];for(let Y=0;Y<N.numberOfInputs;Y+=1)U.push(u(P,{channelCount:N.channelCount,channelCountMode:N.channelCountMode,channelInterpretation:N.channelInterpretation,gain:1})),se.push(a(P,{channelCount:N.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:N.channelCount}));let ue=await Promise.all(Array.from(y.parameters.values()).map(async Y=>{let re=c(P,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Y.value});return await f(P,Y,re.offset),re})),G=o(P,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,w+F)});for(let Y=0;Y<N.numberOfInputs;Y+=1){U[Y].connect(se[Y]);for(let re=0;re<N.channelCount;re+=1)se[Y].connect(G,re,Y*N.channelCount+re)}for(let[Y,re]of ue.entries())re.connect(G,0,w+Y),re.start(0);return G.connect(P.destination),await Promise.all(U.map(Y=>d(y,P,Y))),h(P)})(),C,N,M,A,n)}let O=await b,W=r(C,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[R,S,I]=k;O!==null&&(W.buffer=O,W.start(0)),W.connect(R);for(let w=0,F=0;w<y.numberOfOutputs;w+=1){let T=S[w];for(let D=0;D<M[w];D+=1)R.connect(T,F+D,D);F+=M[w]}return I}if(E)for(let[O,W]of y.parameters.entries())await e(C,W,g.parameters.get(O));else for(let[O,W]of y.parameters.entries())await f(C,W,g.parameters.get(O));return await d(y,C,g),g};return{render(y,C){i(C,y);let g=_.get(C);return g!==void 0?Promise.resolve(g):v(y,C)}}};var jo=(e,t,r,o,a,c,u,i,s,n,l,p,m,f,d,h,x,N,A,_)=>class extends d{constructor(v,y){super(v,y),this._nativeContext=v,this._audioWorklet=e===void 0?void 0:{addModule:(C,g)=>e(this,C,g)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new a(this)}createBuffer(v,y,C){return new r({length:y,numberOfChannels:v,sampleRate:C})}createBufferSource(){return new o(this)}createChannelMerger(v=6){return new c(this,{numberOfInputs:v})}createChannelSplitter(v=6){return new u(this,{numberOfOutputs:v})}createConstantSource(){return new i(this)}createConvolver(){return new s(this)}createDelay(v=1){return new l(this,{maxDelayTime:v})}createDynamicsCompressor(){return new p(this)}createGain(){return new m(this)}createIIRFilter(v,y){return new f(this,{feedback:y,feedforward:v})}createOscillator(){return new h(this)}createPanner(){return new x(this)}createPeriodicWave(v,y,C={disableNormalization:!1}){return new N(this,{...C,imag:y,real:v})}createStereoPanner(){return new A(this)}createWaveShaper(){return new _(this)}decodeAudioData(v,y,C){return n(this._nativeContext,v).then(g=>(typeof y=="function"&&y(g),g),g=>{throw typeof C=="function"&&C(g),g})}};var Ti={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Uo=(e,t,r,o,a,c,u,i)=>class extends e{constructor(n,l){let p=c(n),m={...Ti,...l},f=a(p,m),d=u(p),h=d?r():null;super(n,!1,f,h),this._Q=t(this,d,f.Q,te,oe),this._detune=t(this,d,f.detune,1200*Math.log2(te),-1200*Math.log2(te)),this._frequency=t(this,d,f.frequency,n.sampleRate/2,0),this._gain=t(this,d,f.gain,40*Math.log10(te),oe),this._nativeBiquadFilterNode=f,i(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(n){this._nativeBiquadFilterNode.type=n}getFrequencyResponse(n,l,p){try{this._nativeBiquadFilterNode.getFrequencyResponse(n,l,p)}catch(m){throw m.code===11?o():m}if(n.length!==l.length||l.length!==p.length)throw o()}};var qo=(e,t,r,o,a)=>()=>{let c=new WeakMap,u=async(i,s)=>{let n=r(i),l=q(n,s);if(!l){let p={Q:n.Q.value,channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,detune:n.detune.value,frequency:n.frequency.value,gain:n.gain.value,type:n.type};n=t(s,p)}return c.set(s,n),l?(await e(s,i.Q,n.Q),await e(s,i.detune,n.detune),await e(s,i.frequency,n.frequency),await e(s,i.gain,n.gain)):(await o(s,i.Q,n.Q),await o(s,i.detune,n.detune),await o(s,i.frequency,n.frequency),await o(s,i.gain,n.gain)),await a(i,s,n),n};return{render(i,s){let n=c.get(s);return n!==void 0?Promise.resolve(n):u(i,s)}}};var Zo=(e,t)=>(r,o)=>{let a=t.get(r);if(a!==void 0)return a;let c=e.get(r);if(c!==void 0)return c;try{let u=o();return u instanceof Promise?(e.set(r,u),u.catch(()=>!1).then(i=>(e.delete(r),t.set(r,i),i))):(t.set(r,u),u)}catch{return t.set(r,!1),!1}};var bi={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},zo=(e,t,r,o,a)=>class extends e{constructor(u,i){let s=o(u),n={...bi,...i},l=r(s,n),p=a(s)?t():null;super(u,!1,l,p)}};var Xo=(e,t,r)=>()=>{let o=new WeakMap,a=async(c,u)=>{let i=t(c);if(!q(i,u)){let n={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfInputs:i.numberOfInputs};i=e(u,n)}return o.set(u,i),await r(c,u,i),i};return{render(c,u){let i=o.get(u);return i!==void 0?Promise.resolve(i):a(c,u)}}};var Mi={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Yo=(e,t,r,o,a,c)=>class extends e{constructor(i,s){let n=o(i),l=c({...Mi,...s}),p=r(n,l),m=a(n)?t():null;super(i,!1,p,m)}};var Ho=(e,t,r)=>()=>{let o=new WeakMap,a=async(c,u)=>{let i=t(c);if(!q(i,u)){let n={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfOutputs:i.numberOfOutputs};i=e(u,n)}return o.set(u,i),await r(c,u,i),i};return{render(c,u){let i=o.get(u);return i!==void 0?Promise.resolve(i):a(c,u)}}};var $o=e=>(t,r,o)=>e(r,t,o);var Ko=e=>(t,r,o=0,a=0)=>{let c=t[o];if(c===void 0)throw e();return Ye(r)?c.connect(r,0,a):c.connect(r,0)};var Qo=e=>(t,r)=>{let o=e(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),a=t.createBuffer(1,2,44100);return o.buffer=a,o.loop=!0,o.connect(r),o.start(),()=>{o.stop(),o.disconnect(r)}};var Ei={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Jo=(e,t,r,o,a,c,u)=>class extends e{constructor(s,n){let l=a(s),p={...Ei,...n},m=o(l,p),f=c(l),d=f?r():null;super(s,!1,m,d),this._constantSourceNodeRenderer=d,this._nativeConstantSourceNode=m,this._offset=t(this,f,m.offset,te,oe),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(s){let n=typeof s=="function"?u(this,s):null;this._nativeConstantSourceNode.onended=n;let l=this._nativeConstantSourceNode.onended;this._onended=l!==null&&l===n?s:l}start(s=0){if(this._nativeConstantSourceNode.start(s),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=s),this.context.state!=="closed"){_e(this);let n=()=>{this._nativeConstantSourceNode.removeEventListener("ended",n),de(this)&&Me(this)};this._nativeConstantSourceNode.addEventListener("ended",n)}}stop(s=0){this._nativeConstantSourceNode.stop(s),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=s)}};var en=(e,t,r,o,a)=>()=>{let c=new WeakMap,u=null,i=null,s=async(n,l)=>{let p=r(n),m=q(p,l);if(!m){let f={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,offset:p.offset.value};p=t(l,f),u!==null&&p.start(u),i!==null&&p.stop(i)}return c.set(l,p),m?await e(l,n.offset,p.offset):await o(l,n.offset,p.offset),await a(n,l,p),p};return{set start(n){u=n},set stop(n){i=n},render(n,l){let p=c.get(l);return p!==void 0?Promise.resolve(p):s(n,l)}}};var tn=e=>t=>(e[0]=t,e[0]);var Ri={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},rn=(e,t,r,o,a,c)=>class extends e{constructor(i,s){let n=o(i),l={...Ri,...s},p=r(n,l),f=a(n)?t():null;super(i,!1,p,f),this._isBufferNullified=!1,this._nativeConvolverNode=p,l.buffer!==null&&c(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(i){if(this._nativeConvolverNode.buffer=i,i===null&&this._nativeConvolverNode.buffer!==null){let s=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=s.createBuffer(1,1,s.sampleRate),this._isBufferNullified=!0,c(this,0)}else this._isBufferNullified=!1,c(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(i){this._nativeConvolverNode.normalize=i}};var on=(e,t,r)=>()=>{let o=new WeakMap,a=async(c,u)=>{let i=t(c);if(!q(i,u)){let n={buffer:i.buffer,channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,disableNormalization:!i.normalize};i=e(u,n)}return o.set(u,i),Ce(i)?await r(c,u,i.inputs[0]):await r(c,u,i),i};return{render(c,u){let i=o.get(u);return i!==void 0?Promise.resolve(i):a(c,u)}}};var nn=(e,t)=>(r,o,a)=>{if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(r,o,a)}catch(c){throw c.name==="SyntaxError"?e():c}};var an=()=>new DOMException("","DataCloneError");var gr=e=>{let{port1:t,port2:r}=new MessageChannel;return new Promise(o=>{let a=()=>{r.onmessage=null,t.close(),r.close(),o()};r.onmessage=()=>a();try{t.postMessage(e,[e])}catch{}finally{a()}})};var sn=(e,t,r,o,a,c,u,i,s,n,l)=>(p,m)=>{let f=u(p)?p:c(p);if(a.has(m)){let d=r();return Promise.reject(d)}try{a.add(m)}catch{}return t(s,()=>s(f))?f.decodeAudioData(m).then(d=>(gr(m).catch(()=>{}),t(i,()=>i(d))||l(d),e.add(d),d)):new Promise((d,h)=>{let x=async()=>{try{await gr(m)}catch{}},N=A=>{h(A),x()};try{f.decodeAudioData(m,A=>{typeof A.copyFromChannel!="function"&&(n(A),rt(A)),e.add(A),x().then(()=>d(A))},A=>{N(A===null?o():A)})}catch(A){N(A)}})};var cn=(e,t,r,o,a,c,u,i)=>(s,n)=>{let l=t.get(s);if(l===void 0)throw new Error("Missing the expected cycle count.");let p=c(s.context),m=i(p);if(l===n){if(t.delete(s),!m&&u(s)){let f=o(s),{outputs:d}=r(s);for(let h of d)if(je(h)){let x=o(h[0]);e(f,x,h[1],h[2])}else{let x=a(h[0]);f.connect(x,h[1])}}}else t.set(s,l-n)};var Pi={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},un=(e,t,r,o,a,c,u)=>class extends e{constructor(s,n){let l=a(s),p={...Pi,...n},m=o(l,p),f=c(l),d=f?r(p.maxDelayTime):null;super(s,!1,m,d),this._delayTime=t(this,f,m.delayTime),u(this,p.maxDelayTime)}get delayTime(){return this._delayTime}};var ln=(e,t,r,o,a)=>c=>{let u=new WeakMap,i=async(s,n)=>{let l=r(s),p=q(l,n);if(!p){let m={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,delayTime:l.delayTime.value,maxDelayTime:c};l=t(n,m)}return u.set(n,l),p?await e(n,s.delayTime,l.delayTime):await o(n,s.delayTime,l.delayTime),await a(s,n,l),l};return{render(s,n){let l=u.get(n);return l!==void 0?Promise.resolve(l):i(s,n)}}};var pn=e=>(t,r,o,a)=>e(t[a],c=>c[0]===r&&c[1]===o);var dn=e=>(t,r)=>{e(t).delete(r)};var fn=e=>"delayTime"in e;var mn=(e,t,r)=>function o(a,c){let u=ze(c)?c:r(e,c);if(fn(u))return[];if(a[0]===u)return[a];if(a.includes(u))return[];let{outputs:i}=t(u);return Array.from(i).map(s=>o([...a,u],s[0])).reduce((s,n)=>s.concat(n),[])};var Xt=(e,t,r)=>{let o=t[r];if(o===void 0)throw e();return o},hn=e=>(t,r=void 0,o=void 0,a=0)=>r===void 0?t.forEach(c=>c.disconnect()):typeof r=="number"?Xt(e,t,r).disconnect():Ye(r)?o===void 0?t.forEach(c=>c.disconnect(r)):a===void 0?Xt(e,t,o).disconnect(r,0):Xt(e,t,o).disconnect(r,0,a):o===void 0?t.forEach(c=>c.disconnect(r)):Xt(e,t,o).disconnect(r,0);var ki={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},xn=(e,t,r,o,a,c,u,i)=>class extends e{constructor(n,l){let p=c(n),m={...ki,...l},f=o(p,m),d=u(p),h=d?r():null;super(n,!1,f,h),this._attack=t(this,d,f.attack),this._knee=t(this,d,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=t(this,d,f.ratio),this._release=t(this,d,f.release),this._threshold=t(this,d,f.threshold),i(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(n){let l=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=n,n>2)throw this._nativeDynamicsCompressorNode.channelCount=l,a()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(n){let l=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=n,n==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=l,a()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}};var Nn=(e,t,r,o,a)=>()=>{let c=new WeakMap,u=async(i,s)=>{let n=r(i),l=q(n,s);if(!l){let p={attack:n.attack.value,channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,knee:n.knee.value,ratio:n.ratio.value,release:n.release.value,threshold:n.threshold.value};n=t(s,p)}return c.set(s,n),l?(await e(s,i.attack,n.attack),await e(s,i.knee,n.knee),await e(s,i.ratio,n.ratio),await e(s,i.release,n.release),await e(s,i.threshold,n.threshold)):(await o(s,i.attack,n.attack),await o(s,i.knee,n.knee),await o(s,i.ratio,n.ratio),await o(s,i.release,n.release),await o(s,i.threshold,n.threshold)),await a(i,s,n),n};return{render(i,s){let n=c.get(s);return n!==void 0?Promise.resolve(n):u(i,s)}}};var vn=()=>new DOMException("","EncodingError");var gn=e=>t=>new Promise((r,o)=>{if(e===null){o(new SyntaxError);return}let a=e.document.head;if(a===null)o(new SyntaxError);else{let c=e.document.createElement("script"),u=new Blob([t],{type:"application/javascript"}),i=URL.createObjectURL(u),s=e.onerror,n=()=>{e.onerror=s,URL.revokeObjectURL(i)};e.onerror=(l,p,m,f,d)=>{if(p===i||p===e.location.href&&m===1&&f===1)return n(),o(d),!1;if(s!==null)return s(l,p,m,f,d)},c.onerror=()=>{n(),o(new SyntaxError)},c.onload=()=>{n(),r()},c.src=i,c.type="module",a.appendChild(c)}});var yn=e=>class{constructor(r){this._nativeEventTarget=r,this._listeners=new WeakMap}addEventListener(r,o,a){if(o!==null){let c=this._listeners.get(o);c===void 0&&(c=e(this,o),typeof o=="function"&&this._listeners.set(o,c)),this._nativeEventTarget.addEventListener(r,c,a)}}dispatchEvent(r){return this._nativeEventTarget.dispatchEvent(r)}removeEventListener(r,o,a){let c=o===null?void 0:this._listeners.get(o);this._nativeEventTarget.removeEventListener(r,c===void 0?null:c,a)}};var Cn=e=>(t,r,o)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get(){return Math.round(t*r)}},currentTime:{configurable:!0,get(){return t}}});try{return o()}finally{e!==null&&(delete e.currentFrame,delete e.currentTime)}};var wn=e=>async t=>{try{let r=await fetch(t);if(r.ok)return[await r.text(),r.url]}catch{}throw e()};var Fi={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},An=(e,t,r,o,a,c)=>class extends e{constructor(i,s){let n=a(i),l={...Fi,...s},p=o(n,l),m=c(n),f=m?r():null;super(i,!1,p,f),this._gain=t(this,m,p.gain,te,oe)}get gain(){return this._gain}};var _n=(e,t,r,o,a)=>()=>{let c=new WeakMap,u=async(i,s)=>{let n=r(i),l=q(n,s);if(!l){let p={channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,gain:n.gain.value};n=t(s,p)}return c.set(s,n),l?await e(s,i.gain,n.gain):await o(s,i.gain,n.gain),await a(i,s,n),n};return{render(i,s){let n=c.get(s);return n!==void 0?Promise.resolve(n):u(i,s)}}};var Sn=(e,t)=>r=>t(e,r);var On=e=>t=>{let r=e(t);if(r.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return r.renderer};var In=e=>t=>{var r;return(r=e.get(t))!==null&&r!==void 0?r:0};var Tn=e=>t=>{let r=e(t);if(r.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return r.renderer};var bn=e=>t=>e.get(t);var Q=()=>new DOMException("","InvalidStateError");var Mn=e=>t=>{let r=e.get(t);if(r===void 0)throw Q();return r};var En=(e,t)=>r=>{let o=e.get(r);if(o!==void 0)return o;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return o=new t(1,1,44100),e.set(r,o),o};var Rn=e=>t=>{let r=e.get(t);if(r===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return r};var ut=()=>new DOMException("","InvalidAccessError");var Pn=e=>{e.getFrequencyResponse=(t=>(r,o,a)=>{if(r.length!==o.length||o.length!==a.length)throw ut();return t.call(e,r,o,a)})(e.getFrequencyResponse)};var Di={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},kn=(e,t,r,o,a,c)=>class extends e{constructor(i,s){let n=o(i),l=a(n),p={...Di,...s},m=t(n,l?null:i.baseLatency,p),f=l?r(p.feedback,p.feedforward):null;super(i,!1,m,f),Pn(m),this._nativeIIRFilterNode=m,c(this,1)}getFrequencyResponse(i,s,n){return this._nativeIIRFilterNode.getFrequencyResponse(i,s,n)}};var Yt=(e,t,r,o,a,c,u,i,s,n,l)=>{let p=n.length,m=i;for(let f=0;f<p;f+=1){let d=r[0]*n[f];for(let h=1;h<a;h+=1){let x=m-h&s-1;d+=r[h]*c[x],d-=e[h]*u[x]}for(let h=a;h<o;h+=1)d+=r[h]*c[m-h&s-1];for(let h=a;h<t;h+=1)d-=e[h]*u[m-h&s-1];c[m]=n[f],u[m]=d,m=m+1&s-1,l[f]=d}return m};var Li=(e,t,r,o)=>{let a=r instanceof Float64Array?r:new Float64Array(r),c=o instanceof Float64Array?o:new Float64Array(o),u=a.length,i=c.length,s=Math.min(u,i);if(a[0]!==1){for(let d=0;d<u;d+=1)c[d]/=a[0];for(let d=1;d<i;d+=1)a[d]/=a[0]}let n=32,l=new Float32Array(n),p=new Float32Array(n),m=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate),f=e.numberOfChannels;for(let d=0;d<f;d+=1){let h=e.getChannelData(d),x=m.getChannelData(d);l.fill(0),p.fill(0),Yt(a,u,c,i,s,l,p,0,n,h,x)}return m},Fn=(e,t,r,o,a)=>(c,u)=>{let i=new WeakMap,s=null,n=async(l,p)=>{let m=null,f=t(l),d=q(f,p);if(p.createIIRFilter===void 0?m=e(p,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):d||(f=p.createIIRFilter(u,c)),i.set(p,m===null?f:m),m!==null){if(s===null){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");let x=new r(l.context.destination.channelCount,l.context.length,p.sampleRate);s=(async()=>{await o(l,x,x.destination);let N=await a(x);return Li(N,p,c,u)})()}let h=await s;return m.buffer=h,m.start(0),m}return await o(l,p,f),f};return{render(l,p){let m=i.get(p);return m!==void 0?Promise.resolve(m):n(l,p)}}};var Dn=(e,t,r,o,a,c)=>u=>(i,s)=>{let n=e.get(i);if(n===void 0){if(!u&&c(i)){let l=o(i),{outputs:p}=r(i);for(let m of p)if(je(m)){let f=o(m[0]);t(l,f,m[1],m[2])}else{let f=a(m[0]);l.disconnect(f,m[1])}}e.set(i,s)}else e.set(i,n+s)};var Ln=(e,t)=>r=>{let o=e.get(r);return t(o)||t(r)};var Wn=(e,t)=>r=>e.has(r)||t(r);var Vn=(e,t)=>r=>e.has(r)||t(r);var Bn=(e,t)=>r=>{let o=e.get(r);return t(o)||t(r)};var Gn=e=>t=>e!==null&&t instanceof e;var jn=e=>t=>e!==null&&typeof e.AudioNode=="function"&&t instanceof e.AudioNode;var Un=e=>t=>e!==null&&typeof e.AudioParam=="function"&&t instanceof e.AudioParam;var qn=(e,t)=>r=>e(r)||t(r);var Zn=e=>t=>e!==null&&t instanceof e;var zn=e=>e!==null&&e.isSecureContext;var Xn=(e,t,r,o)=>class extends e{constructor(c,u){let i=r(c),s=t(i,u);if(o(i))throw TypeError();super(c,!0,s,null),this._nativeMediaElementAudioSourceNode=s}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}};var Wi={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Yn=(e,t,r,o)=>class extends e{constructor(c,u){let i=r(c);if(o(i))throw new TypeError;let s={...Wi,...u},n=t(i,s);super(c,!1,n,null),this._nativeMediaStreamAudioDestinationNode=n}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}};var Hn=(e,t,r,o)=>class extends e{constructor(c,u){let i=r(c),s=t(i,u);if(o(i))throw new TypeError;super(c,!0,s,null),this._nativeMediaStreamAudioSourceNode=s}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}};var $n=(e,t,r)=>class extends e{constructor(a,c){let u=r(a),i=t(u,c);super(a,!0,i,null)}};var Kn=(e,t,r,o,a)=>class extends o{constructor(u={}){if(a===null)throw new Error("Missing the native AudioContext constructor.");let i;try{i=new a(u)}catch(l){throw l.code===12&&l.message==="sampleRate is not in range"?t():l}if(i===null)throw r();if(!qt(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&i.sampleRate!==u.sampleRate)throw t();super(i,2);let{latencyHint:s}=u,{sampleRate:n}=i;if(this._baseLatency=typeof i.baseLatency=="number"?i.baseLatency:s==="balanced"?512/n:s==="interactive"||s===void 0?256/n:s==="playback"?1024/n:Math.max(2,Math.min(128,Math.round(s*n/128)))*128/n,this._nativeAudioContext=i,a.name==="webkitAudioContext"?(this._nativeGainNode=i.createGain(),this._nativeOscillatorNode=i.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(i.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,i.state==="running"){this._state="suspended";let l=()=>{this._state==="suspended"&&(this._state=null),i.removeEventListener("statechange",l)};i.addEventListener("statechange",l)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Ge(this)}))}resume(){return this._state==="suspended"?new Promise((u,i)=>{let s=()=>{this._nativeAudioContext.removeEventListener("statechange",s),this._nativeAudioContext.state==="running"?u():this.resume().then(u,i)};this._nativeAudioContext.addEventListener("statechange",s)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}};var Qn=(e,t,r,o,a,c)=>class extends r{constructor(i,s){super(i),this._nativeContext=i,et.set(this,i),o(i)&&a.set(i,new Set),this._destination=new e(this,s),this._listener=t(this,i),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(i){let s=typeof i=="function"?c(this,i):null;this._nativeContext.onstatechange=s;let n=this._nativeContext.onstatechange;this._onstatechange=n!==null&&n===s?i:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}};var Oe=e=>{let t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{let r=e.decodeAudioData(t.buffer,()=>{});return r===void 0?!1:(r.catch(()=>{}),!0)}catch{}return!1};var Vi={numberOfChannels:1},Jn=(e,t,r,o,a)=>class extends o{constructor(u){let{length:i,numberOfChannels:s,sampleRate:n}={...Vi,...u},l=r(s,i,n);e(Oe,()=>Oe(l))||l.addEventListener("statechange",(()=>{let p=0,m=f=>{this._state==="running"&&(p>0?(l.removeEventListener("statechange",m),f.stopImmediatePropagation(),this._waitForThePromiseToSettle(f)):p+=1)};return m})()),super(l,s),this._length=i,this._nativeOfflineAudioContext=l,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Ge(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}};var ea=(e,t)=>(r,o,a)=>{let c=new Set;return r.connect=(u=>(i,s=0,n=0)=>{let l=c.size===0;if(t(i))return u.call(r,i,s,n),e(c,[i,s,n],p=>p[0]===i&&p[1]===s&&p[2]===n,!0),l&&o(),i;u.call(r,i,s),e(c,[i,s],p=>p[0]===i&&p[1]===s,!0),l&&o()})(r.connect),r.disconnect=(u=>(i,s,n)=>{let l=c.size>0;if(i===void 0)u.apply(r),c.clear();else if(typeof i=="number"){u.call(r,i);for(let m of c)m[1]===i&&c.delete(m)}else{t(i)?u.call(r,i,s,n):u.call(r,i,s);for(let m of c)m[0]===i&&(s===void 0||m[1]===s)&&(n===void 0||m[2]===n)&&c.delete(m)}let p=c.size===0;l&&p&&a()})(r.disconnect),r};var Z=(e,t,r)=>{let o=t[r];o!==void 0&&o!==e[r]&&(e[r]=o)};var j=(e,t)=>{Z(e,t,"channelCount"),Z(e,t,"channelCountMode"),Z(e,t,"channelInterpretation")};var yr=e=>typeof e.getFloatTimeDomainData=="function";var ta=e=>{e.getFloatTimeDomainData=t=>{let r=new Uint8Array(t.length);e.getByteTimeDomainData(r);let o=Math.max(r.length,e.fftSize);for(let a=0;a<o;a+=1)t[a]=(r[a]-128)*.0078125;return t}};var ra=(e,t)=>(r,o)=>{let a=r.createAnalyser();if(j(a,o),!(o.maxDecibels>o.minDecibels))throw t();return Z(a,o,"fftSize"),Z(a,o,"maxDecibels"),Z(a,o,"minDecibels"),Z(a,o,"smoothingTimeConstant"),e(yr,()=>yr(a))||ta(a),a};var oa=e=>e===null?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null;var X=(e,t,r)=>{let o=t[r];o!==void 0&&o!==e[r].value&&(e[r].value=o)};var na=e=>{e.start=(t=>{let r=!1;return(o=0,a=0,c)=>{if(r)throw Q();t.call(e,o,a,c),r=!0}})(e.start)};var lt=e=>{e.start=(t=>(r=0,o=0,a)=>{if(typeof a=="number"&&a<0||o<0||r<0)throw new RangeError("The parameters can't be negative.");t.call(e,r,o,a)})(e.start)};var pt=e=>{e.stop=(t=>(r=0)=>{if(r<0)throw new RangeError("The parameter can't be negative.");t.call(e,r)})(e.stop)};var aa=(e,t,r,o,a,c,u,i,s,n,l)=>(p,m)=>{let f=p.createBufferSource();return j(f,m),X(f,m,"playbackRate"),Z(f,m,"buffer"),Z(f,m,"loop"),Z(f,m,"loopEnd"),Z(f,m,"loopStart"),t(r,()=>r(p))||na(f),t(o,()=>o(p))||s(f),t(a,()=>a(p))||n(f,p),t(c,()=>c(p))||lt(f),t(u,()=>u(p))||l(f,p),t(i,()=>i(p))||pt(f),e(p,f),f};var sa=e=>e===null?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null;var ia=(e,t)=>(r,o,a)=>{let c=r.destination;if(c.channelCount!==o)try{c.channelCount=o}catch{}a&&c.channelCountMode!=="explicit"&&(c.channelCountMode="explicit"),c.maxChannelCount===0&&Object.defineProperty(c,"maxChannelCount",{value:o});let u=e(r,{channelCount:o,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:1});return t(u,"channelCount",i=>()=>i.call(u),i=>s=>{i.call(u,s);try{c.channelCount=s}catch(n){if(s>c.maxChannelCount)throw n}}),t(u,"channelCountMode",i=>()=>i.call(u),i=>s=>{i.call(u,s),c.channelCountMode=s}),t(u,"channelInterpretation",i=>()=>i.call(u),i=>s=>{i.call(u,s),c.channelInterpretation=s}),Object.defineProperty(u,"maxChannelCount",{get:()=>c.maxChannelCount}),u.connect(c),u};var ca=e=>e===null?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null;var ua=e=>{let{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}};var la=(e,t,r,o,a)=>(c,u,i,s,n,l)=>{if(i!==null)try{let p=new i(c,s,l),m=new Map,f=null;if(Object.defineProperties(p,{channelCount:{get:()=>l.channelCount,set:()=>{throw e()}},channelCountMode:{get:()=>"explicit",set:()=>{throw e()}},onprocessorerror:{get:()=>f,set:d=>{typeof f=="function"&&p.removeEventListener("processorerror",f),f=typeof d=="function"?d:null,typeof f=="function"&&p.addEventListener("processorerror",f)}}}),p.addEventListener=(d=>(...h)=>{if(h[0]==="processorerror"){let x=typeof h[1]=="function"?h[1]:typeof h[1]=="object"&&h[1]!==null&&typeof h[1].handleEvent=="function"?h[1].handleEvent:null;if(x!==null){let N=m.get(h[1]);N!==void 0?h[1]=N:(h[1]=A=>{A.type==="error"?(Object.defineProperties(A,{type:{value:"processorerror"}}),x(A)):x(new ErrorEvent(h[0],{...A}))},m.set(x,h[1]))}}return d.call(p,"error",h[1],h[2]),d.call(p,...h)})(p.addEventListener),p.removeEventListener=(d=>(...h)=>{if(h[0]==="processorerror"){let x=m.get(h[1]);x!==void 0&&(m.delete(h[1]),h[1]=x)}return d.call(p,"error",h[1],h[2]),d.call(p,h[0],h[1],h[2])})(p.removeEventListener),l.numberOfOutputs!==0){let d=r(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return p.connect(d).connect(c.destination),a(p,()=>d.disconnect(),()=>d.connect(c.destination))}return p}catch(p){throw p.code===11?o():p}if(n===void 0)throw o();return ua(l),t(c,u,n,l)};var Ht=(e,t)=>e===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t)))));var pa=e=>new Promise((t,r)=>{let{port1:o,port2:a}=new MessageChannel;o.onmessage=({data:c})=>{o.close(),a.close(),t(c)},o.onmessageerror=({data:c})=>{o.close(),a.close(),r(c)},a.postMessage(e)});var da=async(e,t)=>{let r=await pa(t);return new e(r)};var fa=(e,t,r,o)=>{let a=Pt.get(e);a===void 0&&(a=new WeakMap,Pt.set(e,a));let c=da(r,o);return a.set(t,c),c};var ma=(e,t,r,o,a,c,u,i,s,n,l,p,m)=>(f,d,h,x)=>{if(x.numberOfInputs===0&&x.numberOfOutputs===0)throw s();let N=Array.isArray(x.outputChannelCount)?x.outputChannelCount:Array.from(x.outputChannelCount);if(N.some(L=>L<1))throw s();if(N.length!==x.numberOfOutputs)throw t();if(x.channelCountMode!=="explicit")throw s();let A=x.channelCount*x.numberOfInputs,_=N.reduce((L,B)=>L+B,0),b=h.parameterDescriptors===void 0?0:h.parameterDescriptors.length;if(A+b>6||_>6)throw s();let v=new MessageChannel,y=[],C=[];for(let L=0;L<x.numberOfInputs;L+=1)y.push(u(f,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,gain:1})),C.push(a(f,{channelCount:x.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:x.channelCount}));let g=[];if(h.parameterDescriptors!==void 0)for(let{defaultValue:L,maxValue:B,minValue:ie,name:J}of h.parameterDescriptors){let z=c(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:x.parameterData[J]!==void 0?x.parameterData[J]:L===void 0?0:L});Object.defineProperties(z.offset,{defaultValue:{get:()=>L===void 0?0:L},maxValue:{get:()=>B===void 0?te:B},minValue:{get:()=>ie===void 0?oe:ie}}),g.push(z)}let k=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,A+b)}),E=Ht(d,f.sampleRate),M=i(f,E,A+b,Math.max(1,_)),O=a(f,{channelCount:Math.max(1,_),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,_)}),W=[];for(let L=0;L<x.numberOfOutputs;L+=1)W.push(o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:N[L]}));for(let L=0;L<x.numberOfInputs;L+=1){y[L].connect(C[L]);for(let B=0;B<x.channelCount;B+=1)C[L].connect(k,B,L*x.channelCount+B)}let R=new st(h.parameterDescriptors===void 0?[]:h.parameterDescriptors.map(({name:L},B)=>{let ie=g[B];return ie.connect(k,0,A+B),ie.start(0),[L,ie.offset]}));k.connect(M);let S=x.channelInterpretation,I=null,w=x.numberOfOutputs===0?[M]:W,F={get bufferSize(){return E},get channelCount(){return x.channelCount},set channelCount(L){throw r()},get channelCountMode(){return x.channelCountMode},set channelCountMode(L){throw r()},get channelInterpretation(){return S},set channelInterpretation(L){for(let B of y)B.channelInterpretation=L;S=L},get context(){return M.context},get inputs(){return y},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get onprocessorerror(){return I},set onprocessorerror(L){typeof I=="function"&&F.removeEventListener("processorerror",I),I=typeof L=="function"?L:null,typeof I=="function"&&F.addEventListener("processorerror",I)},get parameters(){return R},get port(){return v.port2},addEventListener(...L){return M.addEventListener(L[0],L[1],L[2])},connect:e.bind(null,w),disconnect:n.bind(null,w),dispatchEvent(...L){return M.dispatchEvent(L[0])},removeEventListener(...L){return M.removeEventListener(L[0],L[1],L[2])}},T=new Map;v.port1.addEventListener=(L=>(...B)=>{if(B[0]==="message"){let ie=typeof B[1]=="function"?B[1]:typeof B[1]=="object"&&B[1]!==null&&typeof B[1].handleEvent=="function"?B[1].handleEvent:null;if(ie!==null){let J=T.get(B[1]);J!==void 0?B[1]=J:(B[1]=z=>{l(f.currentTime,f.sampleRate,()=>ie(z))},T.set(ie,B[1]))}}return L.call(v.port1,B[0],B[1],B[2])})(v.port1.addEventListener),v.port1.removeEventListener=(L=>(...B)=>{if(B[0]==="message"){let ie=T.get(B[1]);ie!==void 0&&(T.delete(B[1]),B[1]=ie)}return L.call(v.port1,B[0],B[1],B[2])})(v.port1.removeEventListener);let D=null;Object.defineProperty(v.port1,"onmessage",{get:()=>D,set:L=>{typeof D=="function"&&v.port1.removeEventListener("message",D),D=typeof L=="function"?L:null,typeof D=="function"&&(v.port1.addEventListener("message",D),v.port1.start())}}),h.prototype.port=v.port1;let P=null;fa(f,F,h,x).then(L=>P=L);let se=ct(x.numberOfInputs,x.channelCount),ue=ct(x.numberOfOutputs,N),G=h.parameterDescriptors===void 0?[]:h.parameterDescriptors.reduce((L,{name:B})=>({...L,[B]:new Float32Array(128)}),{}),Y=!0,re=()=>{x.numberOfOutputs>0&&M.disconnect(O);for(let L=0,B=0;L<x.numberOfOutputs;L+=1){let ie=W[L];for(let J=0;J<N[L];J+=1)O.disconnect(ie,B+J,J);B+=N[L]}},V=new Map;M.onaudioprocess=({inputBuffer:L,outputBuffer:B})=>{if(P!==null){let ie=p(F);for(let J=0;J<E;J+=128){for(let z=0;z<x.numberOfInputs;z+=1)for(let ee=0;ee<x.channelCount;ee+=1)it(L,se[z],ee,ee,J);h.parameterDescriptors!==void 0&&h.parameterDescriptors.forEach(({name:z},ee)=>{it(L,G,z,A+ee,J)});for(let z=0;z<x.numberOfInputs;z+=1)for(let ee=0;ee<N[z];ee+=1)ue[z][ee].byteLength===0&&(ue[z][ee]=new Float32Array(128));try{let z=se.map((ge,We)=>{if(ie[We].size>0)return V.set(We,E/128),ge;let or=V.get(We);return or===void 0?[]:(ge.every(Zs=>Zs.every(zs=>zs===0))&&(or===1?V.delete(We):V.set(We,or-1)),ge)});Y=l(f.currentTime+J/f.sampleRate,f.sampleRate,()=>P.process(z,ue,G));for(let ge=0,We=0;ge<x.numberOfOutputs;ge+=1){for(let vt=0;vt<N[ge];vt+=1)zt(B,ue[ge],vt,We+vt,J);We+=N[ge]}}catch(z){Y=!1,F.dispatchEvent(new ErrorEvent("processorerror",{colno:z.colno,filename:z.filename,lineno:z.lineno,message:z.message}))}if(!Y){for(let z=0;z<x.numberOfInputs;z+=1){y[z].disconnect(C[z]);for(let ee=0;ee<x.channelCount;ee+=1)C[J].disconnect(k,ee,z*x.channelCount+ee)}if(h.parameterDescriptors!==void 0){let z=h.parameterDescriptors.length;for(let ee=0;ee<z;ee+=1){let ge=g[ee];ge.disconnect(k,0,A+ee),ge.stop()}}k.disconnect(M),M.onaudioprocess=null,Ne?re():ke();break}}}};let Ne=!1,ve=u(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),he=()=>M.connect(ve).connect(f.destination),ke=()=>{M.disconnect(ve),ve.disconnect()},Ze=()=>{if(Y){ke(),x.numberOfOutputs>0&&M.connect(O);for(let L=0,B=0;L<x.numberOfOutputs;L+=1){let ie=W[L];for(let J=0;J<N[L];J+=1)O.connect(ie,B+J,J);B+=N[L]}}Ne=!0},Ke=()=>{Y&&(he(),re()),Ne=!1};return he(),m(F,Ze,Ke)};var Cr=(e,t)=>{let r=e.createBiquadFilter();return j(r,t),X(r,t,"Q"),X(r,t,"detune"),X(r,t,"frequency"),X(r,t,"gain"),Z(r,t,"type"),r};var ha=(e,t)=>(r,o)=>{let a=r.createChannelMerger(o.numberOfInputs);return e!==null&&e.name==="webkitAudioContext"&&t(r,a),j(a,o),a};var xa=e=>{let t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:r=>{if(r!==t)throw Q()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:r=>{if(r!=="explicit")throw Q()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:r=>{if(r!=="discrete")throw Q()}})};var dt=(e,t)=>{let r=e.createChannelSplitter(t.numberOfOutputs);return j(r,t),xa(r),r};var Na=(e,t,r,o,a)=>(c,u)=>{if(c.createConstantSource===void 0)return r(c,u);let i=c.createConstantSource();return j(i,u),X(i,u,"offset"),t(o,()=>o(c))||lt(i),t(a,()=>a(c))||pt(i),e(c,i),i};var we=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e);var va=(e,t,r,o)=>(a,{offset:c,...u})=>{let i=a.createBuffer(1,2,44100),s=t(a,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),n=r(a,{...u,gain:c}),l=i.getChannelData(0);l[0]=1,l[1]=1,s.buffer=i,s.loop=!0;let p={get bufferSize(){},get channelCount(){return n.channelCount},set channelCount(d){n.channelCount=d},get channelCountMode(){return n.channelCountMode},set channelCountMode(d){n.channelCountMode=d},get channelInterpretation(){return n.channelInterpretation},set channelInterpretation(d){n.channelInterpretation=d},get context(){return n.context},get inputs(){return[]},get numberOfInputs(){return s.numberOfInputs},get numberOfOutputs(){return n.numberOfOutputs},get offset(){return n.gain},get onended(){return s.onended},set onended(d){s.onended=d},addEventListener(...d){return s.addEventListener(d[0],d[1],d[2])},dispatchEvent(...d){return s.dispatchEvent(d[0])},removeEventListener(...d){return s.removeEventListener(d[0],d[1],d[2])},start(d=0){s.start.call(s,d)},stop(d=0){s.stop.call(s,d)}},m=()=>s.connect(n),f=()=>s.disconnect(n);return e(a,s),o(we(p,n),m,f)};var ga=(e,t)=>(r,o)=>{let a=r.createConvolver();if(j(a,o),o.disableNormalization===a.normalize&&(a.normalize=!o.disableNormalization),Z(a,o,"buffer"),o.channelCount>2||(t(a,"channelCount",c=>()=>c.call(a),c=>u=>{if(u>2)throw e();return c.call(a,u)}),o.channelCountMode==="max"))throw e();return t(a,"channelCountMode",c=>()=>c.call(a),c=>u=>{if(u==="max")throw e();return c.call(a,u)}),a};var wr=(e,t)=>{let r=e.createDelay(t.maxDelayTime);return j(r,t),X(r,t,"delayTime"),r};var ya=e=>(t,r)=>{let o=t.createDynamicsCompressor();if(j(o,r),r.channelCount>2||r.channelCountMode==="max")throw e();return X(o,r,"attack"),X(o,r,"knee"),X(o,r,"ratio"),X(o,r,"release"),X(o,r,"threshold"),o};var fe=(e,t)=>{let r=e.createGain();return j(r,t),X(r,t,"gain"),r};var Ca=e=>(t,r,o)=>{if(t.createIIRFilter===void 0)return e(t,r,o);let a=t.createIIRFilter(o.feedforward,o.feedback);return j(a,o),a};function Bi(e,t){let r=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/r,(e[1]*t[0]-e[0]*t[1])/r]}function Gi(e,t){return[e[0]*t[0]-e[1]*t[1],e[0]*t[1]+e[1]*t[0]]}function wa(e,t){let r=[0,0];for(let o=e.length-1;o>=0;o-=1)r=Gi(r,t),r[0]+=e[o];return r}var Aa=(e,t,r,o)=>(a,c,{channelCount:u,channelCountMode:i,channelInterpretation:s,feedback:n,feedforward:l})=>{let p=Ht(c,a.sampleRate),m=n instanceof Float64Array?n:new Float64Array(n),f=l instanceof Float64Array?l:new Float64Array(l),d=m.length,h=f.length,x=Math.min(d,h);if(d===0||d>20)throw o();if(m[0]===0)throw t();if(h===0||h>20)throw o();if(f[0]===0)throw t();if(m[0]!==1){for(let g=0;g<h;g+=1)f[g]/=m[0];for(let g=1;g<d;g+=1)m[g]/=m[0]}let N=r(a,p,u,u);N.channelCount=u,N.channelCountMode=i,N.channelInterpretation=s;let A=32,_=[],b=[],v=[];for(let g=0;g<u;g+=1){_.push(0);let k=new Float32Array(A),E=new Float32Array(A);k.fill(0),E.fill(0),b.push(k),v.push(E)}N.onaudioprocess=g=>{let k=g.inputBuffer,E=g.outputBuffer,M=k.numberOfChannels;for(let O=0;O<M;O+=1){let W=k.getChannelData(O),R=E.getChannelData(O);_[O]=Yt(m,d,f,h,x,b[O],v[O],_[O],A,W,R)}};let y=a.sampleRate/2;return we({get bufferSize(){return p},get channelCount(){return N.channelCount},set channelCount(g){N.channelCount=g},get channelCountMode(){return N.channelCountMode},set channelCountMode(g){N.channelCountMode=g},get channelInterpretation(){return N.channelInterpretation},set channelInterpretation(g){N.channelInterpretation=g},get context(){return N.context},get inputs(){return[N]},get numberOfInputs(){return N.numberOfInputs},get numberOfOutputs(){return N.numberOfOutputs},addEventListener(...g){return N.addEventListener(g[0],g[1],g[2])},dispatchEvent(...g){return N.dispatchEvent(g[0])},getFrequencyResponse(g,k,E){if(g.length!==k.length||k.length!==E.length)throw e();let M=g.length;for(let O=0;O<M;O+=1){let W=-Math.PI*(g[O]/y),R=[Math.cos(W),Math.sin(W)],S=wa(f,R),I=wa(m,R),w=Bi(S,I);k[O]=Math.sqrt(w[0]*w[0]+w[1]*w[1]),E[O]=Math.atan2(w[1],w[0])}},removeEventListener(...g){return N.removeEventListener(g[0],g[1],g[2])}},N)};var _a=(e,t)=>e.createMediaElementSource(t.mediaElement);var Sa=(e,t)=>{let r=e.createMediaStreamDestination();return j(r,t),r.numberOfOutputs===1&&Object.defineProperty(r,"numberOfOutputs",{get:()=>0}),r};var Oa=(e,{mediaStream:t})=>{let r=t.getAudioTracks();r.sort((c,u)=>c.id<u.id?-1:c.id>u.id?1:0);let o=r.slice(0,1),a=e.createMediaStreamSource(new MediaStream(o));return Object.defineProperty(a,"mediaStream",{value:t}),a};var Ia=(e,t)=>(r,{mediaStreamTrack:o})=>{if(typeof r.createMediaStreamTrackSource=="function")return r.createMediaStreamTrackSource(o);let a=new MediaStream([o]),c=r.createMediaStreamSource(a);if(o.kind!=="audio")throw e();if(t(r))throw new TypeError;return c};var Ta=e=>e===null?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null;var ba=(e,t,r,o,a,c)=>(u,i)=>{let s=u.createOscillator();return j(s,i),X(s,i,"detune"),X(s,i,"frequency"),i.periodicWave!==void 0?s.setPeriodicWave(i.periodicWave):Z(s,i,"type"),t(r,()=>r(u))||lt(s),t(o,()=>o(u))||c(s,u),t(a,()=>a(u))||pt(s),e(u,s),s};var Ma=e=>(t,r)=>{let o=t.createPanner();return o.orientationX===void 0?e(t,r):(j(o,r),X(o,r,"orientationX"),X(o,r,"orientationY"),X(o,r,"orientationZ"),X(o,r,"positionX"),X(o,r,"positionY"),X(o,r,"positionZ"),Z(o,r,"coneInnerAngle"),Z(o,r,"coneOuterAngle"),Z(o,r,"coneOuterGain"),Z(o,r,"distanceModel"),Z(o,r,"maxDistance"),Z(o,r,"panningModel"),Z(o,r,"refDistance"),Z(o,r,"rolloffFactor"),o)};var Ea=(e,t,r,o,a,c,u,i,s,n)=>(l,{coneInnerAngle:p,coneOuterAngle:m,coneOuterGain:f,distanceModel:d,maxDistance:h,orientationX:x,orientationY:N,orientationZ:A,panningModel:_,positionX:b,positionY:v,positionZ:y,refDistance:C,rolloffFactor:g,...k})=>{let E=l.createPanner();if(k.channelCount>2||k.channelCountMode==="max")throw u();j(E,k);let M={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},O=r(l,{...M,channelInterpretation:"speakers",numberOfInputs:6}),W=o(l,{...k,gain:1}),R=o(l,{...M,gain:1}),S=o(l,{...M,gain:0}),I=o(l,{...M,gain:0}),w=o(l,{...M,gain:0}),F=o(l,{...M,gain:0}),T=o(l,{...M,gain:0}),D=a(l,256,6,1),P=c(l,{...M,curve:new Float32Array([1,1]),oversample:"none"}),U=[x,N,A],se=[b,v,y],ue=new Float32Array(1);D.onaudioprocess=({inputBuffer:V})=>{let Ne=[s(V,ue,0),s(V,ue,1),s(V,ue,2)];Ne.some((he,ke)=>he!==U[ke])&&(E.setOrientation(...Ne),U=Ne);let ve=[s(V,ue,3),s(V,ue,4),s(V,ue,5)];ve.some((he,ke)=>he!==se[ke])&&(E.setPosition(...ve),se=ve)},Object.defineProperty(S.gain,"defaultValue",{get:()=>0}),Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(w.gain,"defaultValue",{get:()=>0}),Object.defineProperty(F.gain,"defaultValue",{get:()=>0}),Object.defineProperty(T.gain,"defaultValue",{get:()=>0});let G={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(V){if(V>2)throw u();W.channelCount=V,E.channelCount=V},get channelCountMode(){return E.channelCountMode},set channelCountMode(V){if(V==="max")throw u();W.channelCountMode=V,E.channelCountMode=V},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(V){W.channelInterpretation=V,E.channelInterpretation=V},get coneInnerAngle(){return E.coneInnerAngle},set coneInnerAngle(V){E.coneInnerAngle=V},get coneOuterAngle(){return E.coneOuterAngle},set coneOuterAngle(V){E.coneOuterAngle=V},get coneOuterGain(){return E.coneOuterGain},set coneOuterGain(V){if(V<0||V>1)throw t();E.coneOuterGain=V},get context(){return E.context},get distanceModel(){return E.distanceModel},set distanceModel(V){E.distanceModel=V},get inputs(){return[W]},get maxDistance(){return E.maxDistance},set maxDistance(V){if(V<0)throw new RangeError;E.maxDistance=V},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get orientationX(){return R.gain},get orientationY(){return S.gain},get orientationZ(){return I.gain},get panningModel(){return E.panningModel},set panningModel(V){E.panningModel=V},get positionX(){return w.gain},get positionY(){return F.gain},get positionZ(){return T.gain},get refDistance(){return E.refDistance},set refDistance(V){if(V<0)throw new RangeError;E.refDistance=V},get rolloffFactor(){return E.rolloffFactor},set rolloffFactor(V){if(V<0)throw new RangeError;E.rolloffFactor=V},addEventListener(...V){return W.addEventListener(V[0],V[1],V[2])},dispatchEvent(...V){return W.dispatchEvent(V[0])},removeEventListener(...V){return W.removeEventListener(V[0],V[1],V[2])}};p!==G.coneInnerAngle&&(G.coneInnerAngle=p),m!==G.coneOuterAngle&&(G.coneOuterAngle=m),f!==G.coneOuterGain&&(G.coneOuterGain=f),d!==G.distanceModel&&(G.distanceModel=d),h!==G.maxDistance&&(G.maxDistance=h),x!==G.orientationX.value&&(G.orientationX.value=x),N!==G.orientationY.value&&(G.orientationY.value=N),A!==G.orientationZ.value&&(G.orientationZ.value=A),_!==G.panningModel&&(G.panningModel=_),b!==G.positionX.value&&(G.positionX.value=b),v!==G.positionY.value&&(G.positionY.value=v),y!==G.positionZ.value&&(G.positionZ.value=y),C!==G.refDistance&&(G.refDistance=C),g!==G.rolloffFactor&&(G.rolloffFactor=g),(U[0]!==1||U[1]!==0||U[2]!==0)&&E.setOrientation(...U),(se[0]!==0||se[1]!==0||se[2]!==0)&&E.setPosition(...se);let Y=()=>{W.connect(E),e(W,P,0,0),P.connect(R).connect(O,0,0),P.connect(S).connect(O,0,1),P.connect(I).connect(O,0,2),P.connect(w).connect(O,0,3),P.connect(F).connect(O,0,4),P.connect(T).connect(O,0,5),O.connect(D).connect(l.destination)},re=()=>{W.disconnect(E),i(W,P,0,0),P.disconnect(R),R.disconnect(O),P.disconnect(S),S.disconnect(O),P.disconnect(I),I.disconnect(O),P.disconnect(w),w.disconnect(O),P.disconnect(F),F.disconnect(O),P.disconnect(T),T.disconnect(O),O.disconnect(D),D.disconnect(l.destination)};return n(we(G,E),Y,re)};var Ra=e=>(t,{disableNormalization:r,imag:o,real:a})=>{let c=o instanceof Float32Array?o:new Float32Array(o),u=a instanceof Float32Array?a:new Float32Array(a),i=t.createPeriodicWave(u,c,{disableNormalization:r});if(Array.from(o).length<2)throw e();return i};var ft=(e,t,r,o)=>e.createScriptProcessor(t,r,o);var Pa=(e,t)=>(r,o)=>{let a=o.channelCountMode;if(a==="clamped-max")throw t();if(r.createStereoPanner===void 0)return e(r,o);let c=r.createStereoPanner();return j(c,o),X(c,o,"pan"),Object.defineProperty(c,"channelCountMode",{get:()=>a,set:u=>{if(u!==a)throw t()}}),c};var ka=(e,t,r,o,a,c)=>{let i=new Float32Array([1,1]),s=Math.PI/2,n={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},l={...n,oversample:"none"},p=(d,h,x,N)=>{let A=new Float32Array(16385),_=new Float32Array(16385);for(let k=0;k<16385;k+=1){let E=k/16384*s;A[k]=Math.cos(E),_[k]=Math.sin(E)}let b=r(d,{...n,gain:0}),v=o(d,{...l,curve:A}),y=o(d,{...l,curve:i}),C=r(d,{...n,gain:0}),g=o(d,{...l,curve:_});return{connectGraph(){h.connect(b),h.connect(y.inputs===void 0?y:y.inputs[0]),h.connect(C),y.connect(x),x.connect(v.inputs===void 0?v:v.inputs[0]),x.connect(g.inputs===void 0?g:g.inputs[0]),v.connect(b.gain),g.connect(C.gain),b.connect(N,0,0),C.connect(N,0,1)},disconnectGraph(){h.disconnect(b),h.disconnect(y.inputs===void 0?y:y.inputs[0]),h.disconnect(C),y.disconnect(x),x.disconnect(v.inputs===void 0?v:v.inputs[0]),x.disconnect(g.inputs===void 0?g:g.inputs[0]),v.disconnect(b.gain),g.disconnect(C.gain),b.disconnect(N,0,0),C.disconnect(N,0,1)}}},m=(d,h,x,N)=>{let A=new Float32Array(16385),_=new Float32Array(16385),b=new Float32Array(16385),v=new Float32Array(16385),y=Math.floor(16385/2);for(let w=0;w<16385;w+=1)if(w>y){let F=(w-y)/(16384-y)*s;A[w]=Math.cos(F),_[w]=Math.sin(F),b[w]=0,v[w]=1}else{let F=w/(16384-y)*s;A[w]=1,_[w]=0,b[w]=Math.cos(F),v[w]=Math.sin(F)}let C=t(d,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),g=r(d,{...n,gain:0}),k=o(d,{...l,curve:A}),E=r(d,{...n,gain:0}),M=o(d,{...l,curve:_}),O=o(d,{...l,curve:i}),W=r(d,{...n,gain:0}),R=o(d,{...l,curve:b}),S=r(d,{...n,gain:0}),I=o(d,{...l,curve:v});return{connectGraph(){h.connect(C),h.connect(O.inputs===void 0?O:O.inputs[0]),C.connect(g,0),C.connect(E,0),C.connect(W,1),C.connect(S,1),O.connect(x),x.connect(k.inputs===void 0?k:k.inputs[0]),x.connect(M.inputs===void 0?M:M.inputs[0]),x.connect(R.inputs===void 0?R:R.inputs[0]),x.connect(I.inputs===void 0?I:I.inputs[0]),k.connect(g.gain),M.connect(E.gain),R.connect(W.gain),I.connect(S.gain),g.connect(N,0,0),W.connect(N,0,0),E.connect(N,0,1),S.connect(N,0,1)},disconnectGraph(){h.disconnect(C),h.disconnect(O.inputs===void 0?O:O.inputs[0]),C.disconnect(g,0),C.disconnect(E,0),C.disconnect(W,1),C.disconnect(S,1),O.disconnect(x),x.disconnect(k.inputs===void 0?k:k.inputs[0]),x.disconnect(M.inputs===void 0?M:M.inputs[0]),x.disconnect(R.inputs===void 0?R:R.inputs[0]),x.disconnect(I.inputs===void 0?I:I.inputs[0]),k.disconnect(g.gain),M.disconnect(E.gain),R.disconnect(W.gain),I.disconnect(S.gain),g.disconnect(N,0,0),W.disconnect(N,0,0),E.disconnect(N,0,1),S.disconnect(N,0,1)}}},f=(d,h,x,N,A)=>{if(h===1)return p(d,x,N,A);if(h===2)return m(d,x,N,A);throw a()};return(d,{channelCount:h,channelCountMode:x,pan:N,...A})=>{if(x==="max")throw a();let _=e(d,{...A,channelCount:1,channelCountMode:x,numberOfInputs:2}),b=r(d,{...A,channelCount:h,channelCountMode:x,gain:1}),v=r(d,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:N}),{connectGraph:y,disconnectGraph:C}=f(d,h,b,v,_);Object.defineProperty(v.gain,"defaultValue",{get:()=>0}),Object.defineProperty(v.gain,"maxValue",{get:()=>1}),Object.defineProperty(v.gain,"minValue",{get:()=>-1});let g={get bufferSize(){},get channelCount(){return b.channelCount},set channelCount(O){b.channelCount!==O&&(k&&C(),{connectGraph:y,disconnectGraph:C}=f(d,O,b,v,_),k&&y()),b.channelCount=O},get channelCountMode(){return b.channelCountMode},set channelCountMode(O){if(O==="clamped-max"||O==="max")throw a();b.channelCountMode=O},get channelInterpretation(){return b.channelInterpretation},set channelInterpretation(O){b.channelInterpretation=O},get context(){return b.context},get inputs(){return[b]},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},get pan(){return v.gain},addEventListener(...O){return b.addEventListener(O[0],O[1],O[2])},dispatchEvent(...O){return b.dispatchEvent(O[0])},removeEventListener(...O){return b.removeEventListener(O[0],O[1],O[2])}},k=!1,E=()=>{y(),k=!0},M=()=>{C(),k=!1};return c(we(g,_),E,M)}};var Fa=(e,t,r,o,a,c,u)=>(i,s)=>{let n=i.createWaveShaper();if(c!==null&&c.name==="webkitAudioContext"&&i.createGain().gain.automationRate===void 0)return r(i,s);j(n,s);let l=s.curve===null||s.curve instanceof Float32Array?s.curve:new Float32Array(s.curve);if(l!==null&&l.length<2)throw t();Z(n,{curve:l},"curve"),Z(n,s,"oversample");let p=null,m=!1;return u(n,"curve",h=>()=>h.call(n),h=>x=>(h.call(n,x),m&&(o(x)&&p===null?p=e(i,n):!o(x)&&p!==null&&(p(),p=null)),x)),a(n,()=>{m=!0,o(n.curve)&&(p=e(i,n))},()=>{m=!1,p!==null&&(p(),p=null)})};var Da=(e,t,r,o,a)=>(c,{curve:u,oversample:i,...s})=>{let n=c.createWaveShaper(),l=c.createWaveShaper();j(n,s),j(l,s);let p=r(c,{...s,gain:1}),m=r(c,{...s,gain:-1}),f=r(c,{...s,gain:1}),d=r(c,{...s,gain:-1}),h=null,x=!1,N=null,A={get bufferSize(){},get channelCount(){return n.channelCount},set channelCount(v){p.channelCount=v,m.channelCount=v,n.channelCount=v,f.channelCount=v,l.channelCount=v,d.channelCount=v},get channelCountMode(){return n.channelCountMode},set channelCountMode(v){p.channelCountMode=v,m.channelCountMode=v,n.channelCountMode=v,f.channelCountMode=v,l.channelCountMode=v,d.channelCountMode=v},get channelInterpretation(){return n.channelInterpretation},set channelInterpretation(v){p.channelInterpretation=v,m.channelInterpretation=v,n.channelInterpretation=v,f.channelInterpretation=v,l.channelInterpretation=v,d.channelInterpretation=v},get context(){return n.context},get curve(){return N},set curve(v){if(v!==null&&v.length<2)throw t();if(v===null)n.curve=v,l.curve=v;else{let y=v.length,C=new Float32Array(y+2-y%2),g=new Float32Array(y+2-y%2);C[0]=v[0],g[0]=-v[y-1];let k=Math.ceil((y+1)/2),E=(y+1)/2-1;for(let M=1;M<k;M+=1){let O=M/k*E,W=Math.floor(O),R=Math.ceil(O);C[M]=W===R?v[W]:(1-(O-W))*v[W]+(1-(R-O))*v[R],g[M]=W===R?-v[y-1-W]:-((1-(O-W))*v[y-1-W])-(1-(R-O))*v[y-1-R]}C[k]=y%2===1?v[k-1]:(v[k-2]+v[k-1])/2,n.curve=C,l.curve=g}N=v,x&&(o(N)&&h===null?h=e(c,p):h!==null&&(h(),h=null))},get inputs(){return[p]},get numberOfInputs(){return n.numberOfInputs},get numberOfOutputs(){return n.numberOfOutputs},get oversample(){return n.oversample},set oversample(v){n.oversample=v,l.oversample=v},addEventListener(...v){return p.addEventListener(v[0],v[1],v[2])},dispatchEvent(...v){return p.dispatchEvent(v[0])},removeEventListener(...v){return p.removeEventListener(v[0],v[1],v[2])}};u!==null&&(A.curve=u instanceof Float32Array?u:new Float32Array(u)),i!==A.oversample&&(A.oversample=i);let _=()=>{p.connect(n).connect(f),p.connect(m).connect(l).connect(d).connect(f),x=!0,o(N)&&(h=e(c,p))},b=()=>{p.disconnect(n),n.disconnect(f),p.disconnect(m),m.disconnect(l),l.disconnect(d),d.disconnect(f),x=!1,h!==null&&(h(),h=null)};return a(we(A,f),_,b)};var le=()=>new DOMException("","NotSupportedError");var ji={numberOfChannels:1},La=(e,t,r,o,a)=>class extends e{constructor(u,i,s){let n;if(typeof u=="number"&&i!==void 0&&s!==void 0)n={length:i,numberOfChannels:u,sampleRate:s};else if(typeof u=="object")n=u;else throw new Error("The given parameters are not valid.");let{length:l,numberOfChannels:p,sampleRate:m}={...ji,...n},f=o(p,l,m);t(Oe,()=>Oe(f))||f.addEventListener("statechange",(()=>{let d=0,h=x=>{this._state==="running"&&(d>0?(f.removeEventListener("statechange",h),x.stopImmediatePropagation(),this._waitForThePromiseToSettle(x)):d+=1)};return h})()),super(f,p),this._length=l,this._nativeOfflineAudioContext=f,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(r()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Ge(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}};var Ui={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Wa=(e,t,r,o,a,c,u)=>class extends e{constructor(s,n){let l=a(s),p={...Ui,...n},m=r(l,p),f=c(l),d=f?o():null,h=s.sampleRate/2;super(s,!1,m,d),this._detune=t(this,f,m.detune,153600,-153600),this._frequency=t(this,f,m.frequency,h,-h),this._nativeOscillatorNode=m,this._onended=null,this._oscillatorNodeRenderer=d,this._oscillatorNodeRenderer!==null&&p.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=p.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(s){let n=typeof s=="function"?u(this,s):null;this._nativeOscillatorNode.onended=n;let l=this._nativeOscillatorNode.onended;this._onended=l!==null&&l===n?s:l}get type(){return this._nativeOscillatorNode.type}set type(s){this._nativeOscillatorNode.type=s,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(s){this._nativeOscillatorNode.setPeriodicWave(s),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=s)}start(s=0){if(this._nativeOscillatorNode.start(s),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=s),this.context.state!=="closed"){_e(this);let n=()=>{this._nativeOscillatorNode.removeEventListener("ended",n),de(this)&&Me(this)};this._nativeOscillatorNode.addEventListener("ended",n)}}stop(s=0){this._nativeOscillatorNode.stop(s),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=s)}};var Va=(e,t,r,o,a)=>()=>{let c=new WeakMap,u=null,i=null,s=null,n=async(l,p)=>{let m=r(l),f=q(m,p);if(!f){let d={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,detune:m.detune.value,frequency:m.frequency.value,periodicWave:u===null?void 0:u,type:m.type};m=t(p,d),i!==null&&m.start(i),s!==null&&m.stop(s)}return c.set(p,m),f?(await e(p,l.detune,m.detune),await e(p,l.frequency,m.frequency)):(await o(p,l.detune,m.detune),await o(p,l.frequency,m.frequency)),await a(l,p,m),m};return{set periodicWave(l){u=l},set start(l){i=l},set stop(l){s=l},render(l,p){let m=c.get(p);return m!==void 0?Promise.resolve(m):n(l,p)}}};var qi={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Ba=(e,t,r,o,a,c,u)=>class extends e{constructor(s,n){let l=a(s),p={...qi,...n},m=r(l,p),f=c(l),d=f?o():null;super(s,!1,m,d),this._nativePannerNode=m,this._orientationX=t(this,f,m.orientationX,te,oe),this._orientationY=t(this,f,m.orientationY,te,oe),this._orientationZ=t(this,f,m.orientationZ,te,oe),this._positionX=t(this,f,m.positionX,te,oe),this._positionY=t(this,f,m.positionY,te,oe),this._positionZ=t(this,f,m.positionZ,te,oe),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(s){this._nativePannerNode.coneInnerAngle=s}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(s){this._nativePannerNode.coneOuterAngle=s}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(s){this._nativePannerNode.coneOuterGain=s}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(s){this._nativePannerNode.distanceModel=s}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(s){this._nativePannerNode.maxDistance=s}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(s){this._nativePannerNode.panningModel=s}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(s){this._nativePannerNode.refDistance=s}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(s){this._nativePannerNode.rolloffFactor=s}};var Ga=(e,t,r,o,a,c,u,i,s,n)=>()=>{let l=new WeakMap,p=null,m=async(f,d)=>{let h=null,x=c(f),N={channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation},A={...N,coneInnerAngle:x.coneInnerAngle,coneOuterAngle:x.coneOuterAngle,coneOuterGain:x.coneOuterGain,distanceModel:x.distanceModel,maxDistance:x.maxDistance,panningModel:x.panningModel,refDistance:x.refDistance,rolloffFactor:x.rolloffFactor},_=q(x,d);if("bufferSize"in x)h=o(d,{...N,gain:1});else if(!_){let b={...A,orientationX:x.orientationX.value,orientationY:x.orientationY.value,orientationZ:x.orientationZ.value,positionX:x.positionX.value,positionY:x.positionY.value,positionZ:x.positionZ.value};x=a(d,b)}if(l.set(d,h===null?x:h),h!==null){if(p===null){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");let M=new u(6,f.context.length,d.sampleRate),O=t(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});O.connect(M.destination),p=(async()=>{let W=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map(async(R,S)=>{let I=r(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:S===0?1:0});return await i(M,R,I.offset),I}));for(let R=0;R<6;R+=1)W[R].connect(O,0,R),W[R].start(0);return n(M)})()}let b=await p,v=o(d,{...N,gain:1});await s(f,d,v);let y=[];for(let M=0;M<b.numberOfChannels;M+=1)y.push(b.getChannelData(M));let C=[y[0][0],y[1][0],y[2][0]],g=[y[3][0],y[4][0],y[5][0]],k=o(d,{...N,gain:1}),E=a(d,{...A,orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:g[0],positionY:g[1],positionZ:g[2]});v.connect(k).connect(E.inputs[0]),E.connect(h);for(let M=128;M<b.length;M+=128){let O=[y[0][M],y[1][M],y[2][M]],W=[y[3][M],y[4][M],y[5][M]];if(O.some((R,S)=>R!==C[S])||W.some((R,S)=>R!==g[S])){C=O,g=W;let R=M/d.sampleRate;k.gain.setValueAtTime(0,R),k=o(d,{...N,gain:0}),E=a(d,{...A,orientationX:C[0],orientationY:C[1],orientationZ:C[2],positionX:g[0],positionY:g[1],positionZ:g[2]}),k.gain.setValueAtTime(1,R),v.connect(k).connect(E.inputs[0]),E.connect(h)}}return h}return _?(await e(d,f.orientationX,x.orientationX),await e(d,f.orientationY,x.orientationY),await e(d,f.orientationZ,x.orientationZ),await e(d,f.positionX,x.positionX),await e(d,f.positionY,x.positionY),await e(d,f.positionZ,x.positionZ)):(await i(d,f.orientationX,x.orientationX),await i(d,f.orientationY,x.orientationY),await i(d,f.orientationZ,x.orientationZ),await i(d,f.positionX,x.positionX),await i(d,f.positionY,x.positionY),await i(d,f.positionZ,x.positionZ)),Ce(x)?await s(f,d,x.inputs[0]):await s(f,d,x),x};return{render(f,d){let h=l.get(d);return h!==void 0?Promise.resolve(h):m(f,d)}}};var Zi={disableNormalization:!1},ja=(e,t,r,o)=>class Ua{constructor(c,u){let i=t(c),s=o({...Zi,...u}),n=e(i,s);return r.add(n),n}static[Symbol.hasInstance](c){return c!==null&&typeof c=="object"&&Object.getPrototypeOf(c)===Ua.prototype||r.has(c)}};var qa=(e,t)=>(r,o,a)=>(e(o).replay(a),t(o,r,a));var Za=(e,t,r)=>async(o,a,c)=>{let u=e(o);await Promise.all(u.activeInputs.map((i,s)=>Array.from(i).map(async([n,l])=>{let m=await t(n).render(n,a),f=o.context.destination;!r(n)&&(o!==f||!r(o))&&m.connect(c,l,s)})).reduce((i,s)=>[...i,...s],[]))};var za=(e,t,r)=>async(o,a,c)=>{let u=t(o);await Promise.all(Array.from(u.activeInputs).map(async([i,s])=>{let l=await e(i).render(i,a);r(i)||l.connect(c,s)}))};var Xa=(e,t,r,o)=>a=>e(Oe,()=>Oe(a))?Promise.resolve(e(o,o)).then(c=>{if(!c){let u=r(a,512,0,1);a.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>a.currentTime,u.connect(a.destination)}return a.startRendering()}):new Promise(c=>{let u=t(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});a.oncomplete=i=>{u.disconnect(),c(i.renderedBuffer)},u.connect(a.destination),a.startRendering()});var Ya=e=>(t,r)=>{e.set(t,r)};var Ha=e=>(t,r)=>e.set(t,r);var $a=(e,t,r,o,a,c,u,i)=>(s,n)=>r(s).render(s,n).then(()=>Promise.all(Array.from(o(n)).map(l=>r(l).render(l,n)))).then(()=>a(n)).then(l=>(typeof l.copyFromChannel!="function"?(u(l),rt(l)):t(c,()=>c(l))||i(l),e.add(l),l));var zi={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Ka=(e,t,r,o,a,c)=>class extends e{constructor(i,s){let n=a(i),l={...zi,...s},p=r(n,l),m=c(n),f=m?o():null;super(i,!1,p,f),this._pan=t(this,m,p.pan)}get pan(){return this._pan}};var Qa=(e,t,r,o,a)=>()=>{let c=new WeakMap,u=async(i,s)=>{let n=r(i),l=q(n,s);if(!l){let p={channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,pan:n.pan.value};n=t(s,p)}return c.set(s,n),l?await e(s,i.pan,n.pan):await o(s,i.pan,n.pan),Ce(n)?await a(i,s,n.inputs[0]):await a(i,s,n),n};return{render(i,s){let n=c.get(s);return n!==void 0?Promise.resolve(n):u(i,s)}}};var Ja=e=>()=>{if(e===null)return!1;try{new e({length:1,sampleRate:44100})}catch{return!1}return!0};var es=(e,t)=>async()=>{if(e===null)return!0;if(t===null)return!1;let r=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),o=new t(1,128,44100),a=URL.createObjectURL(r),c=!1,u=!1;try{await o.audioWorklet.addModule(a);let i=new e(o,"a",{numberOfOutputs:0}),s=o.createOscillator();i.port.onmessage=()=>c=!0,i.onprocessorerror=()=>u=!0,s.connect(i),s.start(0),await o.startRendering(),await new Promise(n=>setTimeout(n))}catch{}finally{URL.revokeObjectURL(a)}return c&&!u};var ts=(e,t)=>()=>{if(t===null)return Promise.resolve(!1);let r=new t(1,1,44100),o=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(a=>{r.oncomplete=()=>{o.disconnect(),a(r.currentTime!==0)},r.startRendering()})};var Ar=()=>new DOMException("","UnknownError");var Xi={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},rs=(e,t,r,o,a,c,u)=>class extends e{constructor(s,n){let l=a(s),p={...Xi,...n},m=r(l,p),d=c(l)?o():null;super(s,!0,m,d),this._isCurveNullified=!1,this._nativeWaveShaperNode=m,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(s){if(s===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(s.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=s}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(s){this._nativeWaveShaperNode.oversample=s}};var os=(e,t,r)=>()=>{let o=new WeakMap,a=async(c,u)=>{let i=t(c);if(!q(i,u)){let n={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,curve:i.curve,oversample:i.oversample};i=e(u,n)}return o.set(u,i),Ce(i)?await r(c,u,i.inputs[0]):await r(c,u,i),i};return{render(c,u){let i=o.get(u);return i!==void 0?Promise.resolve(i):a(c,u)}}};var ns=()=>typeof window>"u"?null:window;var as=(e,t)=>r=>{r.copyFromChannel=(o,a,c=0)=>{let u=e(c),i=e(a);if(i>=r.numberOfChannels)throw t();let s=r.length,n=r.getChannelData(i),l=o.length;for(let p=u<0?-u:0;p+u<s&&p<l;p+=1)o[p]=n[p+u]},r.copyToChannel=(o,a,c=0)=>{let u=e(c),i=e(a);if(i>=r.numberOfChannels)throw t();let s=r.length,n=r.getChannelData(i),l=o.length;for(let p=u<0?-u:0;p+u<s&&p<l;p+=1)n[p+u]=o[p]}};var ss=e=>t=>{t.copyFromChannel=(r=>(o,a,c=0)=>{let u=e(c),i=e(a);if(u<t.length)return r.call(t,o,i,u)})(t.copyFromChannel),t.copyToChannel=(r=>(o,a,c=0)=>{let u=e(c),i=e(a);if(u<t.length)return r.call(t,o,i,u)})(t.copyToChannel)};var is=e=>(t,r)=>{let o=r.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=o),e(t,"buffer",a=>()=>{let c=a.call(t);return c===o?null:c},a=>c=>a.call(t,c===null?o:c))};var cs=(e,t)=>(r,o)=>{o.channelCount=1,o.channelCountMode="explicit",Object.defineProperty(o,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(o,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});let a=r.createBufferSource();t(o,()=>{let i=o.numberOfInputs;for(let s=0;s<i;s+=1)a.connect(o,0,s)},()=>a.disconnect(o))};var _r=(e,t,r)=>e.copyFromChannel===void 0?e.getChannelData(r)[0]:(e.copyFromChannel(t,r),t[0]);var Sr=e=>{if(e===null)return!1;let t=e.length;return t%2!==0?e[Math.floor(t/2)]!==0:e[t/2-1]+e[t/2]!==0};var mt=(e,t,r,o)=>{let a=e;for(;!a.hasOwnProperty(t);)a=Object.getPrototypeOf(a);let{get:c,set:u}=Object.getOwnPropertyDescriptor(a,t);Object.defineProperty(e,t,{get:r(c),set:o(u)})};var us=e=>({...e,outputChannelCount:e.outputChannelCount!==void 0?e.outputChannelCount:e.numberOfInputs===1&&e.numberOfOutputs===1?[e.channelCount]:Array.from({length:e.numberOfOutputs},()=>1)});var ls=e=>({...e,channelCount:e.numberOfOutputs});var ps=e=>{let{imag:t,real:r}=e;return t===void 0?r===void 0?{...e,imag:[0,0],real:[0,0]}:{...e,imag:Array.from(r,()=>0),real:r}:r===void 0?{...e,imag:t,real:Array.from(t,()=>0)}:{...e,imag:t,real:r}};var Or=(e,t,r)=>{try{e.setValueAtTime(t,r)}catch(o){if(o.code!==9)throw o;Or(e,t,r+1e-7)}};var ds=e=>{let t=e.createBufferSource();t.start();try{t.start()}catch{return!0}return!1};var fs=e=>{let t=e.createBufferSource(),r=e.createBuffer(1,1,44100);t.buffer=r;try{t.start(0,1)}catch{return!1}return!0};var ms=e=>{let t=e.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0};var $t=e=>{let t=e.createOscillator();try{t.start(-1)}catch(r){return r instanceof RangeError}return!1};var Ir=e=>{let t=e.createBuffer(1,1,44100),r=e.createBufferSource();r.buffer=t,r.start(),r.stop();try{return r.stop(),!0}catch{return!1}};var Kt=e=>{let t=e.createOscillator();try{t.stop(-1)}catch(r){return r instanceof RangeError}return!1};var hs=e=>{let{port1:t,port2:r}=new MessageChannel;try{t.postMessage(e)}finally{t.close(),r.close()}};var xs=e=>{e.start=(t=>(r=0,o=0,a)=>{let c=e.buffer,u=c===null?o:Math.min(c.duration,o);c!==null&&u>c.duration-.5/e.context.sampleRate?t.call(e,r,0,0):t.call(e,r,u,a)})(e.start)};var Tr=(e,t)=>{let r=t.createGain();e.connect(r);let o=(a=>()=>{a.call(e,r),e.removeEventListener("ended",o)})(e.disconnect);e.addEventListener("ended",o),we(e,r),e.stop=(a=>{let c=!1;return(u=0)=>{if(c)try{a.call(e,u)}catch{r.gain.setValueAtTime(0,u)}else a.call(e,u),c=!0}})(e.stop)};var He=(e,t)=>r=>{let o={value:e};return Object.defineProperties(r,{currentTarget:o,target:o}),typeof t=="function"?t.call(e,r):t.handleEvent.call(e,r)};var Yi=oo(Se),Hi=mo(Se),$i=pn(Ve),vs=new WeakMap,Ki=In(vs),Ae=Zo(new Map,new WeakMap),Ee=ns(),gs=ra(Ae,ye),br=On(ce),pe=Za(ce,br,De),Qi=vo(gs,H,pe),K=Mn(et),Le=Ta(Ee),$=Zn(Le),ys=new WeakMap,Cs=yn(He),ht=sa(Ee),Mr=Gn(ht),Er=jn(Ee),ws=Un(Ee),Ft=ca(Ee),ne=Fo(no(Wt),fo(Yi,Hi,ot,$i,nt,ce,Ki,be,H,Se,de,De,at),Ae,Dn(Et,nt,ce,H,Xe,de),ye,ut,le,cn(ot,Et,ce,H,Xe,K,de,$),mn(ys,ce,ae),Cs,K,Mr,Er,ws,$,Ft),Ji=No(ne,Qi,ye,gs,K,$);var Rr=new WeakSet,Ns=oa(Ee),As=tn(new Uint32Array(1)),Pr=as(As,ye),kr=ss(As),ec=go(Rr,Ae,le,Ns,Le,Ja(Ns),Pr,kr);var Qt=ho(fe),_s=za(br,Be,De),Re=$o(_s),xt=aa(Qt,Ae,ds,fs,ms,$t,Ir,Kt,xs,is(mt),Tr),Pe=qa(Tn(Be),_s),tc=wo(Re,xt,H,Pe,pe),Ie=Lo(ao(Vt),ys,Mt,Wo,me.createCancelAndHoldAutomationEvent,me.createCancelScheduledValuesAutomationEvent,me.createExponentialRampToValueAutomationEvent,me.createLinearRampToValueAutomationEvent,me.createSetTargetAutomationEvent,me.createSetValueAutomationEvent,me.createSetValueCurveAutomationEvent,ht,Or),rc=Co(ne,tc,Ie,Q,xt,K,$,He);var oc=Mo(ne,Eo,ye,Q,ia(fe,mt),K,$,pe),nc=qo(Re,Cr,H,Pe,pe),$e=Ha(vs),ac=Uo(ne,Ie,nc,ut,Cr,K,$,$e),Ue=ea(Se,Er),sc=cs(Q,Ue),qe=ha(ht,sc),ic=Xo(qe,H,pe),cc=zo(ne,ic,qe,K,$),uc=Ho(dt,H,pe),lc=Yo(ne,uc,dt,K,$,ls),pc=va(Qt,xt,fe,Ue),Nt=Na(Qt,Ae,pc,$t,Kt),dc=en(Re,Nt,H,Pe,pe),fc=Jo(ne,Ie,dc,Nt,K,$,He),Ss=ga(le,mt),mc=on(Ss,H,pe),hc=rn(ne,mc,Ss,K,$,$e),xc=ln(Re,wr,H,Pe,pe),Nc=un(ne,Ie,xc,wr,K,$,$e),Os=ya(le),vc=Nn(Re,Os,H,Pe,pe),gc=xn(ne,Ie,vc,Os,le,K,$,$e),yc=_n(Re,fe,H,Pe,pe),Cc=An(ne,Ie,yc,fe,K,$),wc=Aa(ut,Q,ft,le),Jt=Xa(Ae,fe,ft,ts(fe,Le)),Ac=Fn(xt,H,Le,pe,Jt),_c=Ca(wc),Sc=kn(ne,_c,Ac,K,$,$e),Oc=Ro(Ie,qe,Nt,ft,le,_r,$,mt),Is=new WeakMap,Fr=Qn(oc,Oc,Cs,$,Is,He),Ts=ba(Qt,Ae,$t,Ir,Kt,Tr),Ic=Va(Re,Ts,H,Pe,pe),Tc=Wa(ne,Ie,Ts,Ic,K,$,He),bs=Qo(xt),bc=Da(bs,Q,fe,Sr,Ue),er=Fa(bs,Q,bc,Sr,Ue,ht,mt),Mc=Ea(ot,Q,qe,fe,ft,er,le,nt,_r,Ue),Ms=Ma(Mc),Ec=Ga(Re,qe,Nt,fe,Ms,H,Le,Pe,pe,Jt),Rc=Ba(ne,Ie,Ms,Ec,K,$,$e),Pc=Ra(ye),kc=ja(Pc,K,new WeakSet,ps),Fc=ka(qe,dt,fe,er,le,Ue),Es=Pa(Fc,le),Dc=Qa(Re,Es,H,Pe,pe),Lc=Ka(ne,Ie,Es,Dc,K,$),Wc=os(er,H,pe),Vc=rs(ne,Q,er,Wc,K,$,$e),Rs=zn(Ee),Dr=Cn(Ee),Ps=new WeakMap,Bc=En(Ps,Le),Gc=Rs?po(Ae,le,gn(Ee),Dr,wn(ro),K,Bc,$,Ft,new WeakMap,new WeakMap,es(Ft,Le),Ee):void 0,jc=qn(Mr,$),Uc=sn(Rr,Ae,an,vn,new WeakSet,K,jc,tt,Oe,Pr,kr),ks=jo(Gc,Ji,ec,rc,ac,cc,lc,fc,hc,Uc,Nc,gc,Cc,Sc,Fr,Tc,Rc,kc,Lc,Vc),qc=Xn(ne,_a,K,$),Zc=Yn(ne,Sa,K,$),zc=Hn(ne,Oa,K,$),Xc=Ia(Q,$),Yc=$n(ne,Xc,K),_b=bo(ks,Q,le,Ar,qc,Zc,zc,Yc,ht);var Lr=Rn(Is),Hc=xo(Lr),Fs=Ko(ye),$c=dn(Lr),Ds=hn(ye),Ls=new WeakMap,Kc=Sn(Ls,ae),Qc=ma(Fs,ye,Q,qe,dt,Nt,fe,ft,le,Ds,Dr,Kc,Ue),Jc=la(Q,Qc,fe,le,Ue),eu=Go(Re,Fs,xt,qe,dt,Nt,fe,$c,Ds,Dr,H,Ft,Le,Pe,pe,Jt),tu=bn(Ps),ru=Ya(Ls),Sb=Rs?Vo(Hc,ne,Ie,eu,Jc,ce,tu,K,$,Ft,us,ru,hs,He):void 0;var Ob=Kn(Q,le,Ar,Fr,ht);var Ws=nn(le,Le),Vs=$a(Rr,Ae,br,Lr,Jt,tt,Pr,kr),Ib=Jn(Ae,Q,Ws,Fr,Vs);var Bs=La(ks,Ae,Q,Ws,Vs);var Tb=Ln(et,Mr),bb=Wn(Je,Er),Mb=Vn(Mt,ws),Eb=Bn(et,$);var Wr=(e,t,r)=>{let o=new Bs(e.numberOfChannels,Math.round(r*e.sampleRate),e.sampleRate),a=o.createBiquadFilter(),c=o.createBufferSource();return a.frequency.value=240,a.type="lowpass",c.buffer=e,c.connect(a).connect(o.destination),c.start(0,t,r),o.startRendering().then(u=>{let i=u.getChannelData(0),s=u.sampleRate;return{channelData:i,sampleRate:s}})};var Gs=e=>{let t=new Worker(e),r=new Set;return{analyze:(...c)=>{var u;let[i,s,n]=c,l=typeof s=="number"?s:0,p=typeof n=="number"?n:i.duration-l,m=typeof s=="object"?s:typeof n=="object"?n:(u=c[3])!==null&&u!==void 0?u:null;return new Promise(async(f,d)=>{let{channelData:h,sampleRate:x}=await Wr(i,l,p),N=(0,Vr.addUniqueNumber)(r),A=({data:_})=>{_.id===N&&(r.delete(N),t.removeEventListener("message",A),_.error===null?f(_.result.tempo):d(new Error(_.error.message)))};t.addEventListener("message",A),t.postMessage({id:N,method:"analyze",params:{channelData:h,sampleRate:x,...m===null?m:{tempoSettings:m}}},[h.buffer])})},guess:(...c)=>{var u;let[i,s,n]=c,l=typeof s=="number"?s:0,p=typeof n=="number"?n:i.duration-l,m=typeof s=="object"?s:typeof n=="object"?n:(u=c[3])!==null&&u!==void 0?u:null;return new Promise(async(f,d)=>{let{channelData:h,sampleRate:x}=await Wr(i,l,p),N=(0,Vr.addUniqueNumber)(r),A=({data:_})=>{_.id===N&&(r.delete(N),t.removeEventListener("message",A),_.error===null?f(_.result):d(new Error(_.error.message)))};t.addEventListener("message",A),t.postMessage({id:N,method:"guess",params:{channelData:h,sampleRate:x,...m===null?m:{tempoSettings:m}}},[h.buffer])})}}};var js=(e,t)=>{let r=null;return()=>{if(r!==null)return r;let o=new Blob([t],{type:"application/javascript; charset=utf-8"}),a=URL.createObjectURL(o);return r=e(a),setTimeout(()=>URL.revokeObjectURL(a)),r}};var Us=`(()=>{"use strict";const e=(e,t,o)=>{const s=e.length,n=[];let a=!1;for(let r=0;r<s;r+=1)e[r]>t?a=!0:a&&(a=!1,n.push(r-1),r+=o/4-1);return a&&n.push(s-1),n},t=(t,o,s)=>{const n=(e=>{let t=0;const o=e.length;for(let s=0;s<o;s+=1)e[s]>t&&(t=e[s]);return t})(t),a=.3*n;let r=[],l=n-.05*n;if(n>.25)for(;r.length<30&&l>=a;)r=e(t,l,o),l-=.05*n;const p=(e=>{const t=[];return e.forEach(((o,s)=>{const n=Math.min(e.length-s,10);for(let a=1;a<n;a+=1){const n=e[s+a]-o;t.some((e=>e.interval===n&&(e.peaks.push(o),!0)))||t.push({interval:n,peaks:[o]})}})),t})(r),h=function(e,t){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var s,n;const a=Math.max(0,null!==(s=o.minTempo)&&void 0!==s?s:90),r=Math.max(0,null!==(n=o.maxTempo)&&void 0!==n?n:180),l=[];return e.forEach((e=>{let o=60/(e.interval/t);for(;o<a;)o*=2;for(;o>r;)o/=2;let s=!1,n=e.peaks.length;l.forEach((t=>{if(t.tempo===o&&(t.score+=e.peaks.length,t.peaks=[...t.peaks,...e.peaks],s=!0),t.tempo>o-.5&&t.tempo<o+.5){const s=2*Math.abs(t.tempo-o);n+=(1-s)*t.peaks.length,t.score+=(1-s)*e.peaks.length}})),s||l.push({peaks:e.peaks,score:n,tempo:o})})),l}(p,o,s);return h.sort(((e,t)=>t.score-e.score)),h};addEventListener("message",(e=>{let{data:o}=e;try{if("analyze"===o.method){const{id:e,params:{channelData:s,sampleRate:n,tempoSettings:a}}=o,r=((e,o,s)=>{const n=t(e,o,s);if(0===n.length)throw new Error("The given channelData does not contain any detectable beats.");return n[0].tempo})(s,n,a);postMessage({error:null,id:e,result:{tempo:r}})}else{if("guess"!==o.method)throw new Error('The given method "'.concat(o.method,'" is not supported'));{const{id:e,params:{channelData:s,sampleRate:n,tempoSettings:a}}=o,{bpm:r,offset:l,tempo:p}=((e,o,s)=>{const n=t(e,o,s);if(0===n.length)throw new Error("The given channelData does not contain any detectable beats.");const{peaks:a,tempo:r}=n[0],l=Math.round(r),p=60/l;a.sort(((e,t)=>e-t));let h=a[0]/o;for(;h>p;)h-=p;return{bpm:l,offset:h,tempo:r}})(s,n,a);postMessage({error:null,id:e,result:{bpm:r,offset:l,tempo:p}})}}}catch(e){postMessage({error:{message:e.message},id:o.id,result:null})}}))})();`;var ou=js(Gs,Us);var qs=(...e)=>ou().guess(...e);var tr=class{constructor(){gt(this,"mediaRecorder",null);gt(this,"chunks",[]);gt(this,"isRecording",!1)}async startRecording(){if(this.isRecording){console.warn("Recording is already in progress.");return}try{let t=document.querySelector("canvas").captureStream(45);this.chunks=[],this.mediaRecorder=new MediaRecorder(t,{mimeType:"video/webm; codecs=vp9"}),this.mediaRecorder.ondataavailable=r=>{r.data.size>0&&this.chunks.push(r.data)},this.mediaRecorder.start(1e3),this.isRecording=!0,console.log("Recording started.")}catch(t){console.error("Error starting recording:",t)}}stopRecording(){if(!this.isRecording){console.warn("No recording in progress to stop.");return}this.mediaRecorder.stop(),this.isRecording=!1,console.log("Recording stopped.")}saveRecording(){let t=new Blob(this.chunks,{type:"video/webm"}),r=URL.createObjectURL(t),o=document.createElement("a");o.href=r,o.download="recording.webm",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(r),console.log("Recording saved.")}},rr=class{constructor(){gt(this,"recorders",[])}startCapturing(){this.recorders=[],this.recorders.push(new tr),this.recorders[0].startRecording(),setInterval(()=>{this.addRecorder()},1e4)}addRecorder(){let t=this.recorders.push(new tr)-1;this.recorders.at(t)?.startRecording(),setTimeout(()=>{this.recorders.at(t)?.stopRecording(),this.recorders.splice(t,1)},3e4)}stopCapturing(){for(let t of this.recorders)t.stopRecording()}saveClip(){this.recorders.at(0)?.saveRecording()}};var nu={multiplayer:!1,opponent:"",get players(){return window.players},get heads(){return window.heads},get ball(){return window.ball},get globalVars(){return window.globalVars},getBeat:qs,clipper:new rr,practicePlayer:4,giveBall(e){var t=c3_runtimeInterface._localRuntime._iRuntime.objects.balls.getAllInstances()[0];t.instVars.hold=1,t.instVars.who=e},dropBall(){var e=c3_runtimeInterface._localRuntime._iRuntime.objects.balls.getAllInstances()[0];e.instVars.hold=0,e.instVars.who=-1}};Object.defineProperties(window,{ball:{get:()=>c3_runtimeInterface._localRuntime._iRuntime.objects.balls.getAllInstances()[0]},players:{get:()=>[c3_runtimeInterface._localRuntime._iRuntime.objects.body.getAllInstances()[0],c3_runtimeInterface._localRuntime._iRuntime.objects.body2.getAllInstances()[0],c3_runtimeInterface._localRuntime._iRuntime.objects.body3.getAllInstances()[0],c3_runtimeInterface._localRuntime._iRuntime.objects.body4.getAllInstances()[0]]},heads:{get:()=>[c3_runtimeInterface._localRuntime._iRuntime.objects.head.getAllInstances()[0],c3_runtimeInterface._localRuntime._iRuntime.objects.head2.getAllInstances()[0],c3_runtimeInterface._localRuntime._iRuntime.objects.head3.getAllInstances()[0],c3_runtimeInterface._localRuntime._iRuntime.objects.head4.getAllInstances()[0]]},globalVars:{get:()=>c3_runtimeInterface._localRuntime._iRuntime.globalVars}});sr(nu);
//# sourceMappingURL=modmenu.js.map
